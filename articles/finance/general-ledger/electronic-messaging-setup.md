---
title: 전자 메시지 설정
description: 이 항목에서는 전자 메시지(EM) 기능을 설정하는 방법에 대한 정보를 제공합니다.
author: liza-golub
ms.date: 11/18/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: ''
ms.search.region: Global
ms.author: elgolu
ms.search.validFrom: 2021-06-23
ms.dyn365.ops.version: 8.0999999999999996
ms.openlocfilehash: a9d623c712de34afd1b38dbc6a8738ebf9613d49
ms.sourcegitcommit: 8c17717b800c2649af573851ab640368af299981
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/23/2021
ms.locfileid: "8451198"
---
# <a name="set-up-electronic-messages"></a>전자 메시지 설정

[!include [banner](../includes/banner.md)]

**전자 메시지**(EM) 기능은 문서 유형에 따라 다른 전자 보고 프로세스를 유지관리하는 데 도움이 됩니다. [국가별 보고 기능](electronic-messaging.md#country-specific-regulatory-features-supported-by-the-em-functionality)을 지원하는 일부 복잡한 시나리오에서 EM 기능은 많은 메시지 상태, 메시지 항목 상태, 작업, 추가 필드 및 실행 파일 클래스의 조합을 가지도록 설정됩니다. 이러한 시나리오의 경우 데이터 엔터티 패키지를 가져올 수 있습니다. 이러한 데이터 엔터티 패키지를 사용하는 경우 데이터 관리 도구를 사용하여 법인으로 가져옵니다. 데이터 관리 도구의 사용 방법에 대한 자세한 내용은 [데이터 관리](../../fin-ops-core/dev-itpro/data-entities/data-entities-data-packages.md)를 참조하십시오.

데이터 항목 패키지를 가져오지 않는 경우 EM 기능을 수동으로 설정할 수 있습니다. 이 경우 다음 요소를 설정해야 합니다.

- [번호 시퀀스](#sequences)
- [메시지 항목 유형](#types)
- [메시지 항목 상태](#item)
- [메시지 상태](#statuses)
- [추가 필드](#additional)
- [실행 가능한 클래스 설정](#executable)
- [레코드 채우기 작업](#populate)
- [여러 회사의 레코드 채우기](#multiple-companies-populate)
- [웹 애플리케이션](#applications)
- [웹 서비스 설정](#settings)
- [메시지 처리 작업](#actions)
- [전자 메시지 처리](#processing)

다음 섹션에서는 이러한 각 요소에 대한 자세한 정보를 제공합니다.

## <a name="number-sequences"></a><a id="sequences"></a>번호 시퀀스

메시지와 메시지 항목 모두에 대한 번호 시퀀스를 설정합니다. 그런 다음 번호 시퀀스를 사용하여 메시지 및 메시지 항목에 자동으로 번호를 지정합니다. 할당된 번호는 시스템의 메시지 및 메시지 항목에 대한 고유 식별자로 사용됩니다. **총계정원장** \> **원장 설정** \> **총계정원장 매개 변수** 로 이동하여 전자 메시징에 대한 번호 시퀀스를 설정할 수 있습니다.

## <a name="message-item-types"></a><a id="types"></a>메시지 항목 유형

메시지 항목 유형은 전자 메시지에 사용되는 레코드 유형을 식별합니다. **세금** \> **설정** \> **전자 메시지** \> **메시지 항목 유형** 으로 이동하여 메시지 항목 유형을 설정할 수 있습니다.

## <a name="message-item-statuses"></a><a id="item"></a>메시지 항목 상태

메시지 항목 상태는 설정 중인 처리의 메시지 항목에 적용되는 상태를 식별합니다. **세금** \> **설정** \> **전자 메시지** \> **메시지 항목 상태** 로 이동하여 메시지 항목 상태를 설정할 수 있습니다.

메시지 항목 상태의 **삭제 허용** 매개 변수는 **전자 메시지** 페이지 또는 **전자 메시지 항목** 페이지에서 이 상태의 메시지 항목을 삭제할 수 있는지 여부를 정의합니다.

## <a name="message-statuses"></a><a id="statuses"></a>메시지 상태

메시지 처리에서 사용할 수 있어야 하는 메시지 상태를 설정합니다. **세금** \> **설정** \> **전자 메시지** \> **메시지 상태** 로 이동하여 메시지 상태를 설정할 수 있습니다.

다음 표에서는 **메시지 상태** 페이지의 필드에 대해 설명합니다.

| 필드 이름          | 설명 |
|---------------------|-------------|
| 메시지 상태      | 메시지 상태에 대한 고유한 이름을 입력합니다. 메시지 상태는 매 순간의 전자 메시지 상태를 특징짓는 데 사용됩니다. 입력한 이름은 **전자 메시지** 페이지 및 전자 메시지와 관련된 로그에 표시됩니다. |
| 설명         | 메시지 상태에 대한 설명을 입력합니다. |
| 응답 유형       | 메시지 상태에 대한 응답 유형을 선택합니다. 처리의 일부 작업은 둘 이상의 응답 유형을 생성할 수 있습니다. 예를 들어 **웹 서비스** 유형의 작업은 실행 결과에 따라 **성공적으로 실행** 유형 또는 **기술 오류** 유형의 응답을 생성할 수 있습니다. 이 경우 두 응답 유형에 대한 메시지 상태를 정의합니다. 작업 유형 및 이와 관련된 응답 유형에 대한 자세한 내용은 이 항목의 뒷부분에 있는 [메시지 처리 작업 유형](#action-types) 섹션을 참조하십시오. |
| 메시지 항목 상태 | 때로는 전자 메시지의 상태가 관련 메시지 항목의 상태에 영향을 주어야 합니다. 이 필드에서 메시지 항목 상태를 선택하여 메시지 상태와 연결합니다. |
| 삭제 허용        | **전자 메시지** 페이지에서 이 상태의 전자 메시지를 삭제할 수 있는 경우 이 확인란을 선택합니다. |

## <a name="additional-fields"></a><a id="additional"></a>추가 필드

EM 기능을 사용하면 Microsoft Dynamics 365 Finance의 트랜잭션 테이블에서 메시지 항목으로 레코드를 수집할 수 있습니다. 이런 방식으로 보고 기록을 준비한 다음 보고할 수 있습니다. 그러나 트랜잭션 테이블에는 보고 요구 사항을 충족하는 방식으로 레코드를 채우기에 충분한 정보가 없는 경우가 있습니다. 기록에 대해 보고해야 하는 모든 정보를 채우려면 추가 필드를 설정할 수 있습니다. 추가 필드는 메시지 및 메시지 항목과 연관될 수 있습니다. **세금** \> **설정** \> **전자 메시지** \> **추가 필드** 로 이동하여 추가 필드를 설정할 수 있습니다.

다음 표에서는 **추가 필드** 페이지의 일반 필드에 대해 설명합니다.

| 필드       | 설명 |
|-------------|-------------|
| 필드 이름  | 프로세스와 관련된 전자 메시지 또는 메시지 항목에 대한 추가 필드의 이름을 입력합니다. 이 이름은 프로세스로 작업하는 동안 사용자 인터페이스(UI)에 표시됩니다. 이 이름은 프로세스와 관련된 전자 보고(ER) 구성에서도 사용할 수 있습니다. |
| 설명 | 추가 필드에 대한 설명을 입력합니다. |
| 사용자 편집   | UI에서 추가 필드 값을 변경할 수 있는 경우 이 옵션을 **예** 로 설정합니다. |
| 카운터     | 추가 필드에 전자 메시지에 숫자 시퀀스가 포함되어야 하는 경우 이 옵션을 **예** 로 설정합니다. 추가 필드 값은 **전자 보고 내보내기** 유형의 액션이 실행될 때 자동으로 채워집니다. |
| 숨김      | **전자 메시지** 페이지 또는 **전자 메시지 항목** 페이지의 UI에서 추가 필드를 숨기려면 이 옵션을 **예** 로 설정합니다. |

**값** 빠른 탭에서 추가 필드가 가질 수 있는 값을 미리 정의할 수 있습니다. 그러면 사용자가 이 값을 선택할 수 있습니다. 따라서 처리하는 동안 수동으로 입력할 필요가 없습니다. 다음 표에서는 필드를 설명합니다.

| 필드                | 설명 |
|----------------------|-------------|
| 필드 값          | 보고 중 메시지 또는 메시지 항목에 사용할 필드 값을 입력합니다. |
| 설명          | 필드 값에 대한 설명을 입력합니다. |
| 계정 유형         | 일부 필드 값은 특정 계정 유형으로 제한될 수 있습니다. **모두**, **고객** 또는 **공급업체** 중 하나를 선택합니다. |
| 계정 코드         | **계정 유형** 필드에서 **고객** 또는 **공급업체** 를 선택한 경우, 계정 코드 필드에 그룹 또는 테이블을 입력한 경우 이 필드에 특정 그룹 또는 카운터 에이전트를 입력할 수 있습니다. |
| 계정/그룹 번호 | **계정 유형** 필드에서 **고객** 또는 **공급업체** 를 선택한 경우, **계정 코드** 필드에 그룹 또는 테이블을 입력한 경우 이 필드에 특정 그룹 또는 카운터 에이전트를 입력할 수 있습니다. |
| 유효            | 값을 고려하기 시작할 날짜를 지정합니다. |
| 만료           | 값의 고려를 중지할 날짜를 지정합니다. |

기본적으로 **계정/그룹 번호**, **계정 코드**, **유효** 및 **만료** 필드에서 정의된 기준의 조합은 추가 필드의 값 선택에 영향을 주지 않습니다. 그러나 이러한 조합을 실행 파일 클래스에서 사용하여 추가 필드 값을 계산하는 특정 로직을 구현할 수 있습니다.

## <a name="executable-class-settings"></a><a id="executable"></a>실행 가능한 클래스 설정

실행 파일 클래스는 프로세스를 위해 약간의 평가가 필요한 경우 전자 메시지 처리가 동작과 관련하여 호출할 수 있는 X++ 메서드 또는 클래스입니다.

**세금** \> **설정** \> **전자 메시지** \> **실행 가능한 클래스 설정** 으로 이동하여 처리 중에 호출해야 하는 실행 클래스를 수동으로 설정할 수 있습니다. **실행 가능한 클래스 설정** 페이지에서 줄을 만들고 다음 필드를 설정합니다.

| 필드                 | 설명 |
|-----------------------|-------------|
| 실행 가능한 클래스      | 이 클래스와 관련하여 호출되는 메시지 처리 작업을 설정하는 동안 사용할 이름을 입력합니다. |
| 설명           | 실행 가능한 클래스에 대한 설명을 입력합니다. |
| 실행 가능한 클래스 이름 | X++ 실행 가능한 클래스를 선택합니다. |
| 실행 수준       | 이 필드는 선택한 실행 클래스에 대해 값이 미리 정의되어 있으므로 자동으로 설정됩니다. 이 필드는 관련 평가가 실행되는 수준을 제한합니다. |
| 클래스 설명     | 이 필드는 선택한 실행 클래스에 대해 값이 미리 정의되어 있으므로 자동으로 설정됩니다. |
| 작업 유형           | 이 필드는 **기능 관리** 작업 공간에서 **\[EM\] 실행 파일 클래스 작업 유형** 기능이 켜져 있을 때 사용할 수 있습니다. 이 필드를 사용하여 실행 가능한 클래스에 대한 작업 유형을 지정합니다. 이 필드를 사용하면 **전자 메시지** 페이지에서 전자 메시지에 사용할 수 있는 다음 작업을 보다 정확하게 제어할 수 있습니다. |

일부 실행 가능 클래스에는 실행 가능 클래스를 처음 실행하기 전에 정의해야 하는 필수 매개변수가 있을 수 있습니다. 이러한 매개 변수를 정의하려면 작업 창에서 **매개 변수** 를 선택합니다. 표시되는 대화 상자에서 필드를 설정하고 **확인** 을 선택합니다. **확인** 을 선택하는 것이 중요합니다. 그렇지 않으면 매개 변수가 데이터베이스에 저장되지 않고 실행 가능한 클래스가 올바르게 호출되지 않습니다.

## <a name="populate-records-actions"></a><a id="populate"></a>레코드 채우기 작업

레코드 채우기 작업을 사용하여 전자 메시지에 추가할 수 있도록 메시지 항목 테이블에 레코드를 추가하는 작업을 설정합니다. 예를 들어, 전자 메시지가 고객 송장을 보고해야 하는 경우 고객 송장 저널 테이블의 **데이터 원본** 필드에 연결된 레코드 채우기 작업을 설정해야 합니다.

**세금** \> **설정** \> **전자 메시지** \> **레코드 채우기 작업** 으로 이동하여 레코드 채우기 작업을 설정할 수 있습니다. 테이블에 레코드를 추가해야 하는 모든 수행에 대한 새 레코드를 만들고 다음 필드를 설정합니다.

| 필드       | 설명 |
|-------------|-------------|
| 이름        | 프로세스의 레코드를 채우는 작업의 이름을 입력합니다. |
| 설명 | 레코드 채우기 작업에 대한 설명을 입력합니다. |

**데이터 원본 설정** 빠른 탭에서 프로세스에 사용되는 모든 데이터 원본에 대한 행을 추가하고 다음 필드를 설정합니다.

| 필드                  | 설명 |
|------------------------|-------------|
| 이름                   | 데이터 원본의 이름을 입력합니다. |
| 메시지 항목 유형      | 데이터 소스에 대한 레코드를 생성할 때 사용할 메시지 항목의 유형을 선택합니다. |
| 계정 유형           | 데이터 소스의 레코드와 연결할 계정 유형을 선택합니다. |
| 마스터 테이블 이름      | 데이터 원본이 될 테이블을 선택합니다. |
| 문서 번호 필드  | 선택한 마스터 테이블에서 문서 번호를 가져올 필드를 선택합니다. 이 필드의 값은 메시지 항목에 대한 **문서 번호** 필드의 값으로 사용됩니다. |
| 문서 날짜 필드    | 선택한 마스터 테이블에서 문서 날짜를 가져올 필드를 선택합니다. 이 필드의 값은 메시지 항목에 대한 **메시지 항목 날짜** 필드의 값으로 사용됩니다. |
| 문서 계정 필드 | 선택한 마스터 테이블에서 문서 계정을 가져올 필드를 선택합니다. 이 필드의 값은 메시지 항목에 대한 **계정 번호** 필드의 값으로 사용됩니다. |
| 회사                | 이 필드는 **기능 관리** 작업 공간에서 **레코드 채우기 작업 기능에 대한 회사 간 쿼리** 가 설정되어 있을 때 사용할 수 있습니다. 이 기능을 사용하여 레코드 채우기 작업에 대한 회사 간 데이터 소스를 설정합니다. 여러 회사에서 데이터를 가져올 수 있습니다. |
| 사용자 쿼리             | <p>그리드 위에서 **쿼리 편집** 을 선택하여 쿼리를 설정하고 데이터가 채워지는 선택한 마스터 테이블에 적용해야 하는 기준을 지정하면 이 확인란이 자동으로 선택됩니다. 그렇지 않으면 선택한 마스터 테이블 소스에서 모든 레코드가 채워집니다.</p><p>**기능 관리** 작업 공간에서 **레코드 채우기 작업 기능에 대한 회사 간 쿼리** 가 설정되어 있고 여러 회사에서 레코드를 수집해야 하는 경우 보고에 포함되어야 하는 각 법인에 대해 줄을 추가합니다. 새 줄마다 **쿼리 편집** 을 선택하고 줄의 **회사** 필드에 지정된 법인에 고유한 관련 기준을 지정합니다. 완료되면 **데이터 원본 설정** 그리드에는 보고에 포함되어야 하는 모든 법인에 대한 줄이 포함됩니다.</p> |

## <a name="populate-records-from-multiple-companies"></a><a id="multiple-companies-populate"></a>여러 회사의 레코드 채우기

회사가 동일한 재무 데이터베이스에 있는 여러 법인을 통해 보고해야 하는 경우, 데이터를 보고에 포함해야 하는 모든 법인에 대해 [레코드 채우기 작업](#populate)을 설정합니다.

재무 환경에서 이 기능을 사용하려면 다음 단계를 수행하십시오. 

1. **작업 공간** \> **기능 관리** 로 이동합니다.
2. 목록에서 **레코드 채우기 작업 기능에 대한 회사 간 쿼리** 를 찾아 선택합니다.
3. **지금 활성화** 를 선택합니다. 

보고에 데이터를 포함해야 하는 여러 회사에 [대해 레코드 채우기 작업](#populate)을 설정하려면 다음 단계를 수행하십시오.

1. **세금** \> **설정** \> **전자 메시지** \> **기록 채우기 작업** 으로 이동합니다.

    **회사 간 레코드 채우기 작업 쿼리** 기능이 실행되면 **레코드 채우기 작업** 페이지의 **데이터 원본 설정** 그리드에 **회사** 필드가 포함됩니다. [레코드 채우기 작업](#populate)의 일반 설정 중에 생성된 기존 레코드의 경우 이 필드는 현재 법인의 식별자를 표시합니다.

2. **데이터 원본 설정** 그리드에서 보고에 포함되어야 하는 각 종속 법인에 대한 행을 추가하고 다음 필드를 설정합니다.

    | 필드 이름             | 값 |
    |------------------------|-------|
    | 이름                   | 이 레코드의 출처를 이해하는 데 도움이 되는 텍스트 값을 입력합니다. 예를 들어, **데이터 원본 이름 - 자회사 1** 을 입력합니다. |
    | 메시지 항목 유형      | EM 처리에 필요한 메시지 항목 유형을 선택하십시오. |
    | 계정 유형           | EM 처리에 필요한 계정 유형을 지정하십시오. EM 처리에 특정 계정 유형이 없는 경우 **모두** 를 선택합니다. |
    | 마스터 테이블 이름      | EM 처리에 필요한 마스터 테이블의 이름을 지정합니다. |
    | 문서 번호 필드  | EM 처리 기록에 문서 번호가 포함된 필드를 지정합니다. |
    | 문서 날짜 필드    | EM 처리 레코드에 문서 날짜가 들어 있는 필드를 지정합니다. |
    | 문서 계정 필드 | EM 처리 기록에 문서 계정이 포함된 필드를 지정합니다. |
    | 회사                | 자회사의 법인 ID를 선택합니다. |
    | 사용자 쿼리             | 이 확인란은 **쿼리 편집** 을 선택하여 기준을 정의할 때 자동으로 선택됩니다. |

3. 새 줄마다 **쿼리 편집** 을 선택하고 줄의 **회사** 필드에 지정된 법인에 대한 관련 기준을 지정합니다.

## <a name="web-applications"></a><a id="applications"></a>웹 애플리케이션

웹 애플리케이션 설정을 사용하여 웹 애플리케이션이 OAuth(Open Authorization) 2.0을 지원하도록 설정합니다. OAuth는 사용자가 액세스 자격 증명을 공유하지 않고 애플리케이션에 "보안 위임 액세스"를 대신 부여할 수 있는 개방형 표준입니다. 인증 코드와 액세스 토큰을 가져와 인증 프로세스를 수행할 수도 있습니다. **세금** \> **설정** \> **전자 메시지** \> **웹 애플리케이션** 으로 이동하여 웹 애플리케이션 설정을 구성할 수 있습니다.

다음 표에서는 **웹 애플리케이션** 페이지의 필드에 대해 설명합니다.

| 필드                        | 설명 |
|------------------------------|-------------|
| 애플리케이션 이름             | 웹 애플리케이션의 이름을 입력합니다. |
| 설명                  | 웹 애플리케이션에 대한 설명을 입력합니다. |
| 기본 URL                     | 웹 애플리케이션의 기본 인터넷 주소를 입력합니다. |
| 인증 URL 경로       | 권한 부여를 위한 URL을 구성하는 데 사용되는 경로를 지정하십시오. |
| 토큰 URL 경로               | 토큰의 URL을 구성하는 데 사용되는 경로를 지정하십시오. |
| 리디렉션 URL                 | 리디렉션 URL을 입력합니다. |
| 클라이언트 ID                    | 웹 애플리케이션의 클라이언트 ID를 입력합니다. |
| 클라이언트 암호                | 웹 애플리케이션의 클라이언트 암호를 입력합니다. |
| 서버 토큰                 | 웹 애플리케이션의 서버 토큰을 입력합니다. |
| 인증 형식 매핑 | 권한 부여 요청을 생성하는 데 사용되는 ER 형식을 선택합니다. |
| 토큰 모델 매핑 가져오기   | 액세스 토큰을 저장하는 데 사용되는 ER 가져오기 모델 매핑을 선택합니다. |
| 부여된 범위                | 애플리케이션에 대한 요청에 대해 부여된 범위입니다. 이 필드는 자동으로 업데이트됩니다. |
| 액세스 토큰 만료  | 액세스 토큰이 만료되기까지 남은 시간입니다. 이 필드는 자동으로 업데이트됩니다. | 
| 수락                       | 웹 요청의 **수락** 속성을 지정합니다. 예를 들어 **application/vnd.hmrc.1.0+json** 을 입력합니다. |
| 콘텐츠 형식                 | 콘텐츠 형식을 지정합니다. 예를 들어 **application/json** 을 입력합니다. |

또한 인증 프로세스를 지원하기 위해 **웹 애플리케이션** 페이지의 작업 창에서 다음 버튼을 사용할 수 있습니다.

- **인증 코드 받기** – 웹 애플리케이션의 권한을 초기화합니다. 이 기능은 **권한 부여 형식 매핑** 필드에 지정된 ER 형식을 사용하여 권한 부여 요청을 생성합니다.
- **액세스 토큰 가져오기** – 액세스 토큰을 가져오는 프로세스를 초기화합니다.
- **액세스 토큰 새로 고침** – 액세스 토큰을 새로 고칩니다. 이 기능은 **토큰 모델 매핑 가져오기** 필드에 지정된 ER 형식을 사용하여 수신된 액세스 토큰에 대한 정보를 가져옵니다.

웹 애플리케이션에 대한 액세스 토큰이 암호화된 형식으로 시스템의 데이터베이스에 저장되면 웹 서비스에 대한 요청에 사용할 수 있습니다. 보안을 위해 토큰에 대한 액세스는 해당 요청을 처리할 수 있는 보안 역할로 제한되어야 합니다. 보안 그룹 외부의 사용자가 요청을 처리하려고 하면 선택한 웹 애플리케이션을 사용하여 상호 운용할 수 없다는 오류를 수신합니다. 액세스 토큰에 액세스할 수 있는 보안 역할을 설정하려면 **웹 애플리케이션** 페이지의 **보안 역할** 빠른 탭을 사용하십시오. 웹 애플리케이션에 대해 보안 역할을 정의하지 않은 경우, 시스템 관리자만 웹 애플리케이션을 사용하여 상호 운용할 수 있습니다.

선택한 웹 애플리케이션이 있는 각 액션에 대해 **작업 로그** 빠른 탭은 사용자 및 날짜 및 시간에 대한 정보를 저장합니다.

일부 웹 서비스에서는 요청에 서로 다른 헤더를 포함해야 할 수도 있습니다. 시스템 관리자는 추가 헤더와 해당 값을 **보조 헤더** 빠른 탭에 설정한 다음 요청을 생성하는 동안 사용할 수 있습니다.

## <a name="web-service-settings"></a><a id="settings"></a>웹 서비스 설정

웹 서비스 설정을 사용하여 웹 서비스에 대한 직접 데이터 전송을 설정합니다. **세금** \> **설정** \> **전자 메시지** \> **웹 서비스 설정** 으로 이동하여 웹 서비스 설정을 구성할 수 있습니다.

다음 표에서는 **웹 서비스 설정** 페이지의 필드에 대해 설명합니다.

| 필드                          | 설명 |
|--------------------------------|-------------|
| 웹 서비스                    | 웹 서비스의 이름을 입력합니다. |
| 설명                    | 웹 서비스에 대한 설명을 입력합니다. |
| 인터넷 주소               | <p>웹 서비스의 인터넷 주소를 입력합니다. 웹 서비스에 대해 웹 애플리케이션이 지정되고 웹 서비스의 인터넷 주소가 해당 웹 애플리케이션에 대해 정의된 인터넷 주소와 동일해야 하는 경우 **기본 URL 복사** 를 선택합니다. 그럼 웹 애플리케이션의 기본 URL이 이 필드에 복사됩니다.</p><p>**경고:** 여기에서 구성하는 타사 서비스 또는 기타 서비스는 인증이 필요하지 않으며 Microsoft 개인 정보 표준을 충족하지 않을 수 있습니다. 각 서비스의 개인 정보 보호 문서를 검토하고 각 서비스 공급자와 협력하여 해당 서비스가 제공하는 규정 준수 수준에 대해 자세히 알아보아야 합니다. 귀하는 이러한 서비스가 사용자의 보안, 개인 정보 및 법적 표준을 충족하는지 확인할 책임이 있습니다. 서비스 이용에 따른 위험을 부담해야 합니다. Microsoft는 어떠한 명시적 보증, 보증 또는 조건도 제공하지 않습니다. HTTPS와 같이 안전하고 인증된 연결을 제공하는 서비스만 사용하는 것이 좋습니다.</p> |
| 인증서                    | 이전에 설정한 Azure Key Vault 인증서를 선택합니다. |
| 웹 애플리케이션                | 이전에 설정한 웹 애플리케이션을 선택합니다. |
| 응답 유형 – XML        | 응답 유형이 XML인 경우 이 옵션을 **예** 로 설정합니다. |
| 요청 방법                 | 요청 방법을 지정합니다. HTTP는 지정된 리소스에 대해 수행해야 하는 작업을 나타내는 요청 메서드 집합을 정의합니다. 요청 메서드는 **GET**, **POST** 또는 다른 HTTP 메서드가 될 수 있습니다. |
| 요청 헤더                | 요청 헤더를 지정합니다. 요청 헤더는 HTTP 요청에서 사용할 수 있는 HTTP 헤더입니다. 메시지 내용과 관련이 없습니다. |
| 수락                         | 웹 요청의 수락 속성을 지정합니다. |
| 인코딩 수락                | 수락 인코딩 값을 지정하십시오. Accept-Encoding 요청 HTTP 헤더는 클라이언트가 이해할 수 있는 콘텐츠 인코딩을 보급합니다. 이 콘텐츠 인코딩은 일반적으로 압축 알고리즘입니다. |
| 콘텐츠 형식                   | 콘텐츠 형식을 지정합니다. Content-Type 엔터티 HTTP 헤더는 리소스의 미디어 유형을 나타냅니다. |
| 성공적인 응답 코드       | 요청이 성공했음을 나타내는 HTTP 상태 코드를 지정합니다. |
| 헤더 형식 매핑 요청 | 웹 요청 헤더를 생성하는 데 사용되는 ER 형식을 선택합니다. |

## <a name="message-processing-actions"></a><a id="actions"></a>메시지 처리 작업

메시지 처리 작업을 사용하여 프로세스에 대한 작업을 생성하고 매개 변수를 설정할 수 있습니다. **세금** \> **설정** \> **전자 메시지** \> **메시지 처리 작업** 으로 이동하여 메시지 처리 작업을 설정할 수 있습니다.

다음 표에서는 **메시지 처리 작업** 페이지의 필드에 대해 설명합니다.

### <a name="general-fasttab"></a>일반 FastTab

| 필드                                     | 설명 |
|-------------------------------------------|-------------|
| 작업 유형                               | 작업 유형을 선택합니다. 사용 가능한 옵션에 대한 내용은 이 항목의 뒷부분에 있는 [메시지 처리 작업 유형](#action-types) 섹션을 참조하십시오. |
| 형식 매핑                            | 작업에 대해 호출해야 하는 ER 형식을 선택합니다. 이 필드는 **전자 보고 내보내기**, **전자 보고 가져오기** 및 **전자 보고 내보내기 메시지** 유형의 액션에만 사용할 수 있습니다. |
| URL 경로에 대한 형식 매핑               | 작업에 대해 호출해야 하는 ER 형식을 선택합니다. 이 형식은 선택한 웹 서버에 대해 지정된 기본 인터넷 주소에 추가될 URL 주소의 경로를 구성하는 데 사용됩니다. 이 필드는 **웹 서비스** 유형의 작업에만 사용할 수 있습니다. |
| 메시지 항목 유형                         | 작업을 평가해야 하는 레코드 유형을 선택합니다. 이 필드는 **메시지 항목 실행 수준**, **전자 보고 내보내기**, **전자 보고 가져오기** 및 **웹 서비스** 유형 및 기타 유형의 작업에 사용할 수 있습니다. 이 필드를 비워 두면 메시지 처리에 대해 정의된 모든 메시지 항목 유형이 평가됩니다. |
| 실행 가능한 클래스                          | 기존 실행 가능한 클래스 설정을 선택합니다. 이 필드는 **메시지 항목 실행 수준** 및 **메시지 항목 실행 수준** 유형의 작업에만 사용할 수 있습니다. |
| 레코드 채우기 작업                   | 기존 레코드 채우기 작업을 선택합니다. 이 필드는 **레코드 채우기** 유형의 작업에만 사용할 수 있습니다. |
| 웹 서비스                               | 기존 웹 서비스를 선택합니다. 이 필드는 **웹 서비스** 유형의 작업에만 사용할 수 있습니다. |
| 보낼 파일 이름                         | 이 작업으로 보내야 하는 전자 메시지의 첨부 파일 이름을 입력합니다. 여러 첨부 파일의 원본 파일 이름이 동일한 경우 최신 첨부 파일이 전송됩니다. 지정된 원본 파일 이름을 가진 첨부 파일이 없으면 콘텐츠 없이 요청이 전송됩니다. 이 필드는 **웹 서비스** 유형의 작업에만 사용할 수 있습니다. |
| 파일 이름                                 | 작업의 결과가 될 파일의 이름을 지정합니다. 이 파일은 웹 서버의 응답이거나 생성된 보고서일 수 있습니다. 이 필드는 **웹 서비스** 및 **전자 보고 내보내기 메시지** 유형의 작업에만 사용할 수 있습니다. |
| 원본 문서에 파일 첨부          | EM 항목에 대해 참조된 마스터 테이블의 레코드에 생성된 파일을 첨부하려면 이 확인란을 선택합니다. 이 필드는 **전자 보고 내보내기** 및 **웹 서비스** 유형의 작업에만 사용할 수 있습니다. |
| 출력 아카이브의 파일을 항목에 첨부 | 출력 아카이브 파일에서 별도의 XML 파일을 추출하여 해당 전자 메시지 항목에 첨부하려면 이 확인란을 선택합니다. 이 필드는 **전자 보고 내보내기** 유형의 작업에만 사용할 수 있습니다. |
| 내보내기당 메시지 항목 수        | 하나의 파일(메시지)에 포함되어야 하는 메시지 항목 수에 대한 제한을 지정합니다. 이 필드는 **전자 보고 내보내기** 유형의 작업에만 사용할 수 있습니다. |
| ER 소스 사용                             | 가져오기에 ER 소스 매개변수를 사용하려면 이 확인란을 선택합니다. 그렇지 않으면 전자 메시지의 첨부 파일이 사용됩니다. 이 필드는 **전자 보고 가져오기** 유형의 작업에만 사용할 수 있습니다. |
| 대화 상자 표시                               | 보고서가 생성되기 전에 사용자에게 대화 상자를 표시해야 하는 경우 이 옵션을 **예** 로 설정합니다. 이 필드는 **전자 보고 내보내기 메시지** 유형의 작업에만 사용할 수 있습니다. |

#### <a name="message-processing-action-types"></a><a id="action-types"></a>메시지 처리 작업 유형

**작업 유형** 필드에서 다음 옵션을 사용할 수 있습니다.

- **메시지 만들기** – 사용자가 **전자 메시지** 페이지에서 메시지를 수동으로 만들 수 있도록 하려면 이 작업 유형을 사용합니다. 이 유형의 작업에는 초기 상태를 설정할 수 없습니다.
- **레코드 채우기** – 이 작업 유형은 이미 설정되어 있어야 합니다. 작업을 처리에 포함할 수 있도록 레코드 채우기 작업과 연결합니다. 이 작업 유형은 메시지 처리의 첫 번째 수행(미리 작성된 전자 메시지가 없는 경우) 또는 **메시지 작성** 작업 유형이 이전에 작성한 메시지에 메시지 항목을 추가하는 수행에 사용되는 것으로 가정합니다. 따라서 이러한 유형의 작업에 대해 결과 상태는 메시지 항목에 대해서만 설정할 수 있습니다. 초기 상태는 메시지에 대해서만 설정할 수 있습니다.
- **메시지 실행 수준** – 이 작업 유형을 사용하여 메시지 수준에서 평가되어야 하는 실행 가능한 클래스를 설정합니다.
- **메시지 항목 실행 수준** – 이 작업 유형을 사용하여 메시지 항목 수준에서 평가되어야 하는 실행 가능한 클래스를 설정합니다.
- **전자 보고 내보내기** – 메시지 항목 수준에서 내보내기 ER 구성을 기반으로 보고서를 생성해야 하는 작업에 이 작업 유형을 사용합니다.
- **전자 보고 내보내기 메시지** – 메시지 수준에서 내보내기 ER 구성을 기반으로 보고서를 생성하는 작업(예: 메시지에 메시지 항목이 없는 경우)에 대해 이 작업 유형을 사용합니다.
- **전자 보고 가져오기** – 가져오기 ER 구성을 기반으로 보고서를 생성해야 하는 작업에 대해 이 작업 유형을 사용합니다.
- **메시지 수준 사용자 처리** – 메시지 수준에서 사용자가 수동 작업을 수행하는 작업에 이 작업 유형을 사용합니다. 예를 들어 사용자가 메시지 상태를 업데이트할 수 있습니다.
- **사용자 처리** – 메시지 항목 수준에서 사용자의 수동 작업을 가정하는 작업에 대해 이 작업 유형을 사용합니다. 예를 들어 사용자가 메시지 항목의 상태를 업데이트할 수 있습니다.
- **웹 서비스** – 생성된 보고서를 웹 서비스로 전송해야 하는 작업에 이 작업 유형을 사용합니다. 이 작업 유형은 이탈리아 구매 및 판매 송장 커뮤니케이션 보고에 사용되지 않습니다. 이 작업 유형의 경우 **메시지 처리 작업** 페이지에는 확인 텍스트를 지정할 수 있는 **기타 세부 정보** 빠른 탭이 있습니다. 이 확인 텍스트는 요청이 선택한 웹 서비스로 전달되기 전에 사용자에게 표시됩니다.
- **확인 요청** – 이 작업 유형을 사용하여 서버에서 확인을 요청합니다.

### <a name="initial-statuses-fasttab"></a>초기 상태 빠른 탭

> [!NOTE]
> **초기 상태** 빠른 탭은 초기 작업 유형이 **메시지 만들기** 인 작업에 사용할 수 없습니다.

| 필드               | 설명 |
|---------------------|-------------|
| 메시지 항목 상태 | 선택한 메시지 처리 작업을 평가해야 하는 메시지 항목 상태를 선택합니다. |
| 설명         | 선택한 메시지 항목 상태에 대한 설명입니다. |

### <a name="result-statuses-fasttab"></a>결과 상태 빠른 탭

| 필드               | 설명 |
|---------------------|-------------|
| 메시지 상태      | 선택한 메시지 처리 작업을 평가해야 하는 메시지 상태를 선택합니다. 이 필드는 메시지 수준에서 평가되는 메시지 처리 작업에만 사용할 수 있습니다. 예를 들어 **전자 보고 내보내기** 및 **전자 보고 가져오기** 유형의 작업에는 사용할 수 있지만 **사용자 처리** 및 **메시지 항목 실행 수준** 유형의 작업에는 사용할 수 없습니다. |
| 설명         | 선택한 메시지 상태에 대한 설명입니다. |
| 응답 유형       | 선택한 메시지 상태의 응답 유형입니다. |
| 메시지 항목 상태 | 선택한 메시지 처리 작업을 평가한 후 사용할 수 있는 결과 상태를 선택합니다. 이 필드는 메시지 항목 수준에서 평가되는 메시지 처리 작업에만 사용할 수 있습니다. 예를 들어 **사용자 처리** 및 **메시지 항목 실행 수준** 유형의 작업에 사용할 수 있습니다. 메시지 수준에서 평가되는 메시지 처리 작업의 경우 이 필드는 선택한 메시지 상태에 대해 설정된 메시지 항목 상태를 표시합니다. |

다음 표는 다양한 작업 유형 및 응답 유형에 대해 설정해야 하는 결과 상태를 보여줍니다.

| 전자 메시지 조치 유형/응답 유형 | 성공적으로 실행됨 | 비즈니스 오류 | 기술적 오류 | 사용자 정의 | 취소 |
|----------------------------------------------|-----------------------|----------------|-----------------|--------------|--------|
| 메시지 작성                               | X                     |                |                 |              |        |
| 전자 보고 내보내기                  | X                     |                |                 |              |        |
| 전자 보고 가져오기                  |                       |                |                 |              |        |
| 웹 서비스                                  | X                     |                | X               |              |        |
| 사용자 처리                              |                       |                |                 |              |        |
| 메시지 실행 수준                      |                       |                |                 |              |        |
| 레코드 채우기                             |                       |                |                 |              |        |
| 메시지 항목 실행 수준                 |                       |                |                 |              |        |
| 확인 요청                         | X                     | X              | X               |              |        |
| 전자 보고 내보내기 메시지          | X                     |                |                 |              |        |
| 메시지 수준 사용자 처리                |                       |                |                 |              |        |

## <a name="electronic-message-processing"></a><a id="processing"></a>전자 메시지 처리

전자 메시지 처리는 EM 기능의 기본 개념입니다. 전자 메시지에 대해 평가해야 하는 작업을 집계합니다. 작업은 초기 상태와 결과 상태를 사용하여 연결할 수 있습니다. 또는 **사용자 처리** 유형의 작업을 독립적으로 시작할 수 있습니다. 전자메시지 처리를 설정하려면 **세금** \> **설정** \> **전자 메시지** \> **전자 메시지 처리** 로 이동합니다.

**작업** 빠른 탭을 사용하여 미리 정의된 작업을 처리에 추가할 수 있습니다. 작업을 별도로 실행해야 하는지 또는 처리에 의해 시작할 수 있는지 여부를 지정할 수 있습니다. 처리 중인 작업을 사용자만 초기화할 수 있도록 지정하려면 해당 작업에 대해 **별도로 실행** 필드를 **예** 로 설정합니다. 작업의 초기 상태로 정의된 메시지 또는 메시지 항목에 대한 처리로 작업을 시작해야 하는 경우, **별도로 실행** 필드를 **아니요** 로 설정합니다. **사용자 작업** 유형의 작업은 항상 별도로 실행해야 합니다.

첫 번째 작업이 별도로 실행되도록 설정되어 있어도 여러 작업을 시퀀스로 집계해야 하는 경우가 있습니다. 예를 들어, 사용자는 보고서 생성을 초기화해야 합니다. 단, 보고서가 생성된 직후 웹 서비스로 전송해야 하며 웹 서비스의 응답이 시스템에 반영되어야 합니다. 이 경우 항상 함께 실행되어야 하는 작업에 대해 분리할 수 없는 시퀀스를 생성할 수 있습니다. **작업** 빠른 탭에서 그리드 위에서 **분리할 수 없는 시퀀스** 를 선택하고 시퀀스를 만듭니다. 그런 다음 한 시퀀스에서 함께 실행해야 하는 모든 작업에 대해 **분리할 수 없는 시퀀스** 필드에서 시퀀스를 선택합니다. 이 예에서 시퀀스의 첫 번째 작업에 대해서는 **별도로 실행** 필드를 **예** 로, 다른 모든 작업에 대해서는 **아니요** 로 설정할 수 있습니다.

**전자 보고 내보내기** 및 **전자 보고 내보내기 메시지** 유형의 작업은 입력 매개 변수가 있는 ER 형식을 실행합니다. 전자 메시지 처리에 이러한 유형 중 하나의 작업이 포함된 경우 보고서 생성 전에 입력 매개 변수의 값을 지정해야 합니다. 이러한 방식으로 시스템은 배치 체계를 사용하여 보고서를 생성할 수 있습니다. 그리드 위의 **매개 변수** 를 선택하여 선택한 작업 유형(**전자 보고 내보내기** 또는 **전자 보고 내보내기 메시지**)에 대한 매개 변수를 설정할 수 있습니다. 배치 체제에서 지정된 매개 변수를 사용하여 실행해야 하는 작업에 대해 **매개 변수 사용** 확인란을 선택합니다.

**메시지 항목 추가 필드** 빠른 탭을 사용하여 메시지 항목과 관련된 미리 정의된 추가 필드를 추가합니다. 필드 관련 메시지 항목 유형별로 필드를 추가해야 합니다. 처리하는 동안 추가 필드에 할당될 기본값을 지정할 수 있습니다.

**메시지 추가 필드** 빠른 탭을 사용하여 메시지와 관련된 미리 정의된 추가 필드를 추가합니다. 처리하는 동안 추가 필드에 할당될 기본값을 지정할 수 있습니다.

**보안 역할** 빠른 탭을 사용하여 특정 처리를 위해 시스템에 미리 정의된 보안 역할을 설정합니다. 특정 역할을 가진 사용자에게는 해당 역할에 대해 정의된 처리만 표시됩니다.

**일괄 처리** 빠른 탭을 사용하여 일괄 처리 체제에서 작동하도록 설정합니다. 작업 영역에서 **처리 실행** 을 선택하여 처리를 시작할 때 **전자 메시지** 또는 **전자 메시지 항목** 페이지에서 직접 처리할 일관 처리 체제를 설정하는 것이 좋습니다.
