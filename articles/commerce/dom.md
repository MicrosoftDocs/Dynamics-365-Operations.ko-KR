---
title: DOM(분산 주문 관리)
description: 이 문서에서는 Dynamics 365 Commerce에서 제공하는 DOM(분산 주문 관리) 기능에 대해 설명합니다.
author: josaw1
ms.date: 02/08/2022
ms.topic: index-page
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2018-11-15
ms.dyn365.ops.version: ''
ms.openlocfilehash: 26817321753c8e39d61957b4ea2004f20daf1b2f
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/03/2022
ms.locfileid: "8878516"
---
# <a name="distributed-order-management-dom"></a>DOM(분산 주문 관리)

[!include [banner](includes/banner.md)]

이 문서에서는 Microsoft Dynamics 365 Commerce에서 제공하는 DOM(분산 주문 관리) 기능에 대해 설명합니다.

DOM은 공급망 네트워크에서 주문 이행을 극대화하는 데 도움이 되는 옴니채널 주문 이행 최적화 솔루션입니다. DOM을 사용하면 올바른 출처에서 정확한 시간에 올바른 수량의 제품을 고객에게 배송할 수 있습니다. 또한 DOM은 수익을 극대화하고 비용을 최소화하며 서비스 수준 요구 사항을 충족하는 데도 도움이 됩니다.

DOM에서는 MIP(혼합 정수 프로그래밍) 및 예측 분석 모델을 사용하여 배치 수준과 개별 주문 수준 모두에서 최적화를 수행합니다. 이 기능을 사용하면 소매업체는 정의된 규칙을 사용하여 서로 상충하는 수많은 주문 이행 요구 사항 간의 균형을 맞출 수 있습니다. 제품 이행이 여러 채널에서 진행되는 현대적인 공급 네트워크에서, 조직은 주문 변경, 공급업체 가용성 문제 및 수요 급증에 신속하게 대처해야 합니다. DOM을 사용하면 가장 가까운 출처에서 주문을 이행하여 비용을 최소화하는 것과 같은 비즈니스 제약 조건 및 목표를 기반으로, 주문 이행을 극대화하고 제품 배송을 위한 올바른 출처를 찾을 수 있습니다. DOM에서는 제품 이행 출처와 배송 목적지 사이의 거리, 최적화 목표로 정의된 비용 요소, 주문 이행을 최적화하기 위한 이행 노드의 재고 같은 제약 조건으로서 정의된 규칙을 사용합니다. DOM을 사용하면 기업은 비즈니스 또는 소비자 부문의 유형에 맞게 다양한 최적화 전략을 실행할 수 있는 여러 프로필을 정의할 수 있습니다. 

다음 그림은 DOM 시스템에서의 판매 주문 수명 주기를 보여줍니다.

![DOM 컨텍스트에서의 판매 주문 수명 주기.](./media/flow.png "DOM 컨텍스트에서의 판매 주문 수명 주기")

## <a name="set-up-dom"></a>DOM 설정

1. **시스템 관리 \> 설정 \> 라이선스 구성** 으로 이동합니다.
2. **구성 키** 탭에서 **Commerce** 노드를 확장하고 **분산 주문 관리** 확인란을 선택합니다.
3. **Retail 및 Commerce \> 분산 주문 관리 \> 설정 \> DOM 매개 변수** 로 이동합니다.
4. **일반** 탭에서 다음 값을 설정합니다.

    - **분산 주문 관리 활성화** – 이 옵션을 **예** 로 설정합니다.
    - **DOM에 대한 Bing 지도 사용 확인** – 이 옵션을 **예** 로 설정합니다.

        > [!NOTE]
        > **Commerce 공유 매개 변수** 페이지(**Retail 및 Commerce \> Headquarters 설정 \> 매개 변수 \> Commerce 공유 매개 변수**)의 **Bing 지도** 탭에서 **Bing 지도 사용** 옵션을 **예** 로 설정하고, **Bing 지도 키** 필드에 올바른 키를 입력했을 때만 이 옵션을 **예** 로 설정할 수 있습니다.
        >
        > [Bing 지도 Dev Center](https://www.bingmapsportal.com/) 포털을 사용하면 Bing 지도 API 키에 대한 액세스를 지정한 도메인 집합으로 제한할 수 있습니다. 이 기능을 사용하면 고객은 키의 유효성을 검사할 참조 페이지 값 또는 IP 주소 범위의 엄격한 집합을 정의할 수 있습니다. 허용 목록에서 시작된 요청은 정상적으로 처리되지만, 목록 외부에서 시작된 요청은 액세스 거부 응답을 반환합니다. API 키에 도메인 보안을 추가하는 것은 선택 사항이며, 변경되지 않은 키는 계속 작동합니다. 키 허용 목록은 다른 모든 키와 독립적이므로, 각 키에 대해 고유한 규칙을 가질 수 있습니다. 분산 주문 관리는 도메인 참조 속성 설정을 지원하지 않습니다.

    - **보존 기간(일)** – DOM 실행이 생성하는 이행 계획이 시스템에 유지되는 기간을 지정합니다. **DOM 이행 데이터 삭제 작업 설정** 일괄 작업은 여기에 지정한 일 수보다 오래된 이행 계획을 모두 삭제합니다.
    - **거부 기간(일)** – 거부된 주문 라인이 동일한 위치에 지정되려면 경과해야 하는 기간을 지정합니다.

5. **해결사** 탭에서 다음 값을 설정합니다.

    - **최대 자동 이행 시도** – 주문 라인을 특정 위치로 중개하는 DOM 엔진의 시도 횟수를 지정합니다. 지정된 시도 횟수 내에 주문 라인을 위치로 중개하지 못하면, DOM 엔진은 주문 라인을 예외로 표시합니다. 이후에는 상태가 수동으로 재설정될 때까지 향후 실행에서 관련 라인을 건너뜁니다.
    - **로컬 매장 지역 반경** – 값을 입력합니다. 이 필드를 사용하면 위치가 그룹화되고 거리 측면에서 동일한 것으로 간주되는 방법을 확인할 수 있습니다. 예를 들어 **100** 을 입력하면 이행 주소 기준 반경 100마일 내에 있는 모든 매장이나 유통 센터는 거리가 동일한 것으로 간주됩니다.
    - **해결사 유형** – 값을 선택합니다. Commerce는 **프로덕션 해결사** 와 **간소화된 해결사** 라는 두 가 해결사 유형과 함께 릴리스되었습니다. DOM을 실행할 모든 기계(즉 DOMBatch 그룹의 일부인 모든 서버)에서는 **프로덕션 해결사** 를 선택해야 합니다. 프로덕션 해결사에는 기본적으로 라이선스가 부여되고 프로덕션 환경에 배포되는 특수 라이선스 키가 필요합니다. 최신 Tier 2+ 환경에서는 프로덕션 해결사가 이미 활성화되어 있습니다. 비프로덕션 환경에서는 이 라이선스 키를 수동으로 배포해야 합니다. 라이선스 키를 수동으로 배포하려면 다음 단계를 따르세요.

        1. Microsoft Dynamics Lifecycle Services에서 공유 애샛 라이브러리를 열고, 애셋 유형으로 **모델** 을 선택하고, **DOM 라이선스** 파일을 다운로드합니다.
        1. Microsoft IIS(인터넷 정보 서비스) 관리자를 시작하고 **AOSService 웹사이트** 를 마우스 오른쪽 버튼으로 클릭한 다음 **탐색** 을 선택합니다. **\<AOS service root\>\\webroot** 에서 Windows 탐색기 창이 열립니다. 다음 단계에서 사용해야 하니 \<AOS Service root\>경로를 기록해 둡니다.
        1. **\<AOS Service root\>\\PackagesLocalDirectory\\DOM\\bin** 디렉터리에서 구성 파일을 복사합니다.
        1. Headquarters 클라이언트로 이동하여 **DOM 매개 변수** 페이지를 엽니다. **해결사** 탭의 **해결사 유형** 필드에서 **프로덕션 해결사** 를 선택하고 오류 메시지가 표시되지 않는지 확인합니다.

        > [!NOTE]
        > 간소화된 해결사는 소매업체가 특별 라이선스를 배포하지 않고도 DOM 기능을 시험해 볼 수 있게 해줍니다. 조직은 프로덕션 환경에서 간소화된 해결사를 사용해선 안 됩니다.
        >
        > 프로덕션 해결사는 성능(예: 실행에서 처리할 수 있는 주문 및 주문 라인 수)과 결과의 수렴(일부 시나리오에서는 주문 일괄 처리가 최상의 결과를 산출하지 못하기 때문)을 개선합니다. **부분 주문** 규칙과 **최대 위치 수** 규칙 같은 일부 규칙에는 프로덕션 해결사가 필요합니다.

6. **Retail 및 Commerce \> 분산 주문 관리 \> 설정 \> DOM 매개 변수** 로 돌아갑니다.
7. **숫자 시퀀스** 탭에서 필요한 숫자 시퀀스를 여러 DOM 엔터티에 할당합니다.

    > [!NOTE]
    > 숫자 시퀀스를 엔터티에 할당하려면 먼저 **숫자 시퀀스** 페이지(**조직 관리 \> 숫자 시퀀스 \> 숫자 시퀀스**)에서 정의해야 합니다.

8. DOM 기능은 다양한 유형의 DOM 규칙 정의를 지원하며, 조직은 비즈니스 요구 사항에 맞게 다양한 규칙을 구성할 수 있습니다. DOM 규칙은 위치 그룹 또는 개별 위치와 특정 제품 카테고리, 제품 또는 변형에 대해 정의할 수 있습니다. DOM 규칙에 사용해야 하는 위치 그룹을 만들려면 다음 단계를 따르세요.

    1. **Retail 및 Commerce \> 채널 설정 \> 이행 그룹** 으로 이동합니다.
    2. **새로 만들기** 를 선택하고 새 그룹의 이름과 설명을 입력합니다.
    3. **저장** 을 선택합니다.
    4. **라인 추가** 를 선택하여 그룹에 단일 위치를 추가합니다. 또는 **여러 라인 추가** 를 선택하여 여러 위치를 추가합니다.

    > [!NOTE]
    > Commerce 버전 10.0.12 이상에서는 **기능 관리** 작업 영역에서 **이행 그룹에서 활성화된 '배송' 또는 '픽업'을 위치로 지정하는 기능** 이 활성화되어야 합니다.
    >
    > 이 기능은 **이행 그룹** 페이지에 새 구성을 추가하기 때문에, 배송에 창고를 사용할 수 있거나 배송/매장 조합을 배송 또는 픽업이나 배송과 픽업 모두에 사용할 수 있는지를 확인할 수 있습니다. 
    >
    > 기능을 활성화하면 POS에서 픽업 또는 배송 주문을 생성할 때 위치 선택에 사용할 수 있는 옵션이 업데이트됩니다.
    >
    > 또한 이 기능을 활성화하면 "모두 배송" 또는 "선택된 항목 배송" 작업이 선택될 때 POS에서 페이지가 업데이트됩니다.

9. 규칙을 정의하려면 **Retail 및 Commerce \> 분산 주문 관리 \> 설정 \> 규칙 관리** 로 이동합니다. 현재 지원되는 DOM 규칙은 다음과 같습니다.

    - **최소 인벤토리 규칙** – 이 규칙 유형은 조직이 주문 이행 이외의 목적으로 특정 수량의 제품을 "제한"할 수 있게 합니다. 예를 들어 조직은 주문 이행을 위해 매장에서 사용할 수 있는 모든 재고를 DOM이 고려하는 일은 원치 않을 수 있습니다. 대신 방문 고객을 위해 일부 재고를 예약하길 원합니다. 이 규칙 유형을 사용하면 제품 범주, 개별 제품, 위치/위치 그룹별 제품 변형을 유지하는 최소 재고를 정의할 수 있습니다. 추가 범주 계층을 사용하여 최소 재고를 정의할 수도 있습니다. 제품이 여러 범주에 속하는 경우, 범주를 사용할 수 있는 모든 규칙에 대해 보조 범주에 가장 높은 중요도가 부여됩니다.
    - **이행 위치 우선 순위 규칙** – 이 규칙 유형은 조직이 위치 계층 구조를 정의하여, DOM 엔진이 특정 제품의 이행 위치를 식별하려 할 때 고려하는 우선 순위를 설정할 수 있게 합니다. 유효한 우선 순위 범위는 1~10이며, 1은 가장 높은 우선 순위이고 10은 가장 낮은 우선 순위입니다. 우선 순위가 높은 위치가 우선 순위가 낮은 위치보다 먼저 고려됩니다. 규칙이 엄격한 제약 조건으로 정의된 경우, 주문은 우선 순위가 정의된 위치로만 중개됩니다. DOM은 모든 주문을 단일 위치에서 배송하는 방법을 선호합니다. 따라서 우선 순위가 1인 위치에 전체 주문과 관련 라인이 없다면, DOM은 우선 순위가 2인 위치에서 주문 이행을 시도합니다.
    - **부분 주문 규칙** – Retail 버전 10.0.5에서는 **단일 위치에서만 주문 이행** 매개 변수가 **최대 이행 위치** 로 변경되었습니다. 이전 매개 변수에서 사용자는 주문을 단일 위치에서 이행할 수 있는지 아니면 가능한 한 많은 위치에서 이행할 수 있는지를 구성할 수 있었습니다. 새 매개변수를 사용하면 사용자는 이행이 (최대 5개의) 위치 집합에서 수행될 수 있는지 아니면 가능한 많은 위치에서 수행될 수 있는지를 지정할 수 있습니다. 단일 위치에서의 이행을 제외한 모든 옵션에 대해 DOM은 라인을 분할합니다. 주문 처리가 라인별로 이루어지기 때문입니다. 이 규칙은 프로덕션 해결사에서만 작동합니다.
    - **오프라인 이행 위치 규칙** – 이 규칙은 조직이 단일 위치 또는 위치 그룹을 오프라인 또는 DOM에서 사용할 수 없음으로 지정하여 해당 위치에 주문을 할당할 수 없게 합니다.
    - **최대한의 거부 규칙** – 이 규칙으로 조직은 거부를 위한 임계값을 정의할 수 있습니다. 임계값에 도달하면 DOM 프로세서는 주문 또는 주문 라인을 예외로 표시하고 추가 처리에서 제외합니다. 성능이 저하되지 않도록, DOM에서는 거부 기록 모두 확인하지는 않습니다. 

        주문 라인이 단일 위치에 할당된 후 어떤 이유로든 해당 주문 라인을 이행하지 못할 수도 있기 때문에 해당 위치는 할당된 주문 라인을 거부할 수 있습니다. 거부된 라인은 예외로 표시되고, 다음 실행에서 처리할 수 있도록 풀로 돌아갑니다. 다음 실행 동안 DOM에서는 거부된 라인을 다른 위치에 할당합니다. 새 위치는 할당된 주문 라인을 거부할 수도 있습니다. 이러한 할당 및 거부 주기는 여러 번 발생할 수 있습니다. 거부 횟수가 정의된 임계값에 도달하면, DOM은 주문 라인을 영구 예외로 표시하고 라인을 할당 항목으로 다시 선택하지 않습니다. DOM은 사용자가 주문 라인의 상태를 수동으로 재설정하는 경우에만 주문 라인의 재할당을 다시 고려합니다.

    - **최대 거리 규칙** – 이 규칙은 조직이 단일 위치 또는 위치 그룹에서 주문을 이행할 수 있는 최대 거리를 정의할 수 있게 합니다. 겹치는 최대 거리 규칙이 위치에 대해 정의된 경우, DOM은 이 위치에 정의된 가장 짧은 최대 거리를 적용합니다.
    - **최대 구문 규칙** – 이 규칙은 조직이 단일 위치 또는 위치 그룹에서 처리할 수 있는 최대 주문 수를 정의할 수 있게 합니다. 최적화 프로세스를 진행하는 동안 시스템에서는 이러한 위치에서 배송되지 않은 주문을 고려합니다. 이 확인 작업은 프로필 전체에서 수행됩니다. 따라서 동일한 위치에 대한 여러 프로필에서 중복되는 최대 주문 수가 정의된 경우, 시스템에서는 모든 프로필에 정의된 최대 주문 수를 고려합니다. 

    다음은 앞의 모든 규칙 유형에 대해 정의할 수 있는 대표적인 공통 특성입니다.

    - **시작 날짜** 와 **종료 날짜** – 이 필드를 사용하면 각 규칙 날짜를 유효하게 만들 수 있습니다.
    - **비활성화** – 이 필드의 값이 **아니요** 인 규칙만이 DOM 실행에서 고려됩니다.
    - **강한 제약 조건** – 규칙은 강한 제약 조건이나 강하지 않는 제약 조건으로 정의할 수 있습니다. 모든 DOM 실행은 두 번 반복됩니다. 첫 번째 반복에서 모든 규칙은 이 필드의 설정에 상관없이 강한 제약 조건 규칙으로 처리됩니다. 다시 말해 모든 규칙이 적용됩니다. 유일한 예외는 **위치 우선 순위** 규칙입니다. 두 번째 반복에서는 강한 제약 조건 규칙으로 정의되지 않은 규칙이 제거되고, 모든 규칙을 적용했을 때 할당되지 않은 주문 또는 주문 라인이 위치에 할당됩니다.

10. 이행 프로필은 규칙, 법인, 판매 주문 출처 및 배송 방식 모음을 그룹화하는 데 사용합니다. 모든 DOM 실행은 특정 이행 프로필을 대상으로 합니다. 이 방식을 사용하면 조직은 특정 판매 주문 출처 및 배송 방식이 있는 주문에서 법인 집합에 대한 규칙 집합을 정의하고 실행할 수 있습니다. 따라서 다양한 판매 주문 출처 또는 배송 방식에 대해 다양한 규칙 집합을 실행해야 하는 경우, 이러한 조건에 맞는 이행 프로필을 정의할 수 있습니다. 이행 프로필을 설정하려면 다음 단계를 따르세요.  

    1. **Retail 및 Commerce \> 분산 주문 관리 \> 설정 \> 이행 프로필** 로 이동합니다.
    2. **새로 만들기** 를 선택합니다.
    3. **프로필** 및 **설명** 필드에 값을 입력합니다.
    4. **결과 자동 적용** 옵션을 설정합니다. 이 옵션을 **예** 로 설정하면, 프로필에 대한 DOM 실행 결과가 판매 주문 라인에 자동으로 적용됩니다. **아니요** 로 설정하면 결과는 이행 계획에서만 확인할 수 있습니다. 판매 주문 라인에는 적용되지 않습니다.
    5. 모든 판매 주문 출처가 있는 주문(판매 주문 출처가 정의되지 않은 주문 포함)을 대상으로 DOM 프로필을 실행하려면, **판매 출처가 비어 있는 주문 처리** 옵션을 **예** 로 설정합니다. 일부 판매 주문 출처를 대상으로 프로필을 실행하려면 **판매 출처** 페이지에서 이러한 출처를 정의해야 합니다. 방법은 나중에 설명하겠습니다.

        > [!NOTE]
        > Commerce 버전 10.0.12 릴리스 이상에서는 **기능 관리** 작업 영역에서 **이행 프로필에 이행 그룹을 할당하는 기능** 기능을 활성화해야 합니다. 이 기능을 사용하면 이행 프로필을 이용해 최적화를 실행할 때 DOM에서 고려해야 하는 창고 목록을 지정할 수 있습니다. 이 창고 목록이 지정되지 않으면 DOM에서는 프로필에 정의된 법인의 모든 창고를 찾습니다.
        >
        > 이 기능은 단일 이행 그룹에 연결할 수 있는 새 구성을 **이행 프로필** 페이지에 추가합니다. 
        >
        > 이행 그룹을 선택하면 관련 이행 프로필에 대한 DOM 규칙은 이행 그룹에 포함된 "배송" 창고에 대상으로 효율적으로 실행됩니다. 
        > 
        > 이 기능을 효과적으로 사용하려면 모든 배송 창고를 포함하는 단일 이행 그룹이 있는지 확인한 다음, 이 이행 그룹을 이행 프로필에 연결해야 합니다.

    6. **법인** 빠른 탭에서 **추가** 를 선택하고 법인을 선택합니다.
    7. **규칙** 빠른 탭에서 **추가** 를 선택하고, 프로필에 연결할 규칙을 선택합니다.
    8. 모든 필수 규칙이 프로필과 연결될 때까지 앞의 두 단계를 반복합니다.
    9. **저장** 을 선택합니다.
    10. 작업 창의 **설정** 탭에서 **배송 방식** 을 선택합니다.
    11. **배송 방식** 페이지에서 **새로 만들기** 를 선택합니다.
    12. **회사** 필드에서 법인을 선택합니다. 회사 목록에는 이전에 추가한 법인만 표시됩니다.
    13. **배송 방식** 필드에서 이 프로필에 연결할 배송 방식을 선택합니다. 배송 방식은 여러 활성 프로필에 연결할 수 없습니다.
    14. 모든 필수 배송 방식이 프로필과 연결될 때까지 앞의 두 단계를 반복합니다.
    15. **배송 방식** 페이지를 닫습니다.
    16. 작업 창의 **설정** 탭에서 **판매 주문 출처** 를 선택합니다.
    17. **판매 출처** 페이지에서 **새로 만들기** 를 선택합니다.
    18. **회사** 필드에서 법인을 선택합니다. 회사 목록에는 이전에 추가한 법인만 표시됩니다.
    19. **판매 출처** 필드에서 이 프로필에 연결할 판매 출처를 선택합니다. 판매 출처는 여러 활성 프로필에 연결할 수 없습니다.
    20. 모든 필수 판매 출처가 프로필과 연결될 때까지 앞의 두 단계를 반복합니다.
    21. **판매 출처** 페이지를 닫습니다.
    22. **프로필 활성화** 옵션을 **예** 로 설정합니다. 설정에 오류가 있으면 경고 메시지가 표시됩니다.

## <a name="dom-processing"></a>DOM 처리

DOM은 일괄 처리 작업에서만 실행됩니다. DOM 실행을 위한 일괄 처리 작업을 구성하려면 다음 단계를 따르세요.

1. **Retail 및 Commerce \> 분산 주문 관리 \> 일괄 처리 \> DOM 처리자 작업 설정** 으로 이동합니다.
1. **매개 변수** 빠른 탭의 **이행 프로필** 필드에서, DOM이 실행해야 하는 프로필을 선택합니다.
1. **일괄 처리 그룹** 필드의 **백그라운드에서 실행** 빠른 탭에서, 구성된 일괄 처리 그룹을 선택합니다.
1. **작업 설명** 필드에 일괄 처리 작업의 이름을 입력합니다.
1. **되풀이** 를 선택하고 일괄 처리 작업의 되풀이를 정의합니다.
1. **확인** 을 선택합니다.

처리 시 DOM은 여기에서 설명하는 것처럼 주문과 주문 라인을 고려합니다.

- DOM 프로필에 정의된 판매 주문 출처, 배송 방식 및 법인에 대한 기준을 충족하고 다음 기준도 충족하는 주문 라인:

    - Commerce 채널에서 생성됩니다.
    - DOM에 의해 중개되지 않았습니다.
    - DOM에 의해 중개된 적이 있지만, 예외로 표시되었고 시도 최대 임계값 미만입니다.
    - 배송 방식은 픽업이나 전자 배송이 아닙니다.
    - 배송 표시가 되지 않았습니다.
    - 수동으로 제외되지 않습니다.

- 보류 상태가 아닌 주문

DOM은 규칙, 재고 제약 조건과 최적화를 적용한 후 고객의 배송 주소와 가장 가까운 위치를 선택합니다. DOM은 **배송** 유형의 주소를 위도 및 경도 값으로 변환합니다. 그런 다음 판매 주문의 배송 주소를 위도 및 경도 값으로 변환하고, 나중에 사용할 수 있도록 주소의 위도 및 경도 값을 업데이트합니다. DOM은 Bing 지도를 사용하여 주소, 도시 및 우편 번호 정보를 기반으로 정확한 위도 및 경도 값을 결정합니다.

DOM은 설정에 따라 Bing 지도 API를 사용하여 공중 또는 도로 거리를 계산합니다. 그런 다음 이 정보를 사용하여 배송비를 결정합니다. 최적화 모델은 단일 위치에서의 전체 주문 이행을 우선시합니다. 주문 일부를 동일한 도시 또는 우편번호로 처리할 수 있지만, 배송 건수를 줄이기 위해 모델을 최적화했습니다. 

DOM은 창고 V2 엔티티의 현재 재고를 확인하여 사용 가능한 재고를 조회합니다. 각 배치 실행 중에 DOM은 프로파일에 정의된 작업의 **DOM 프로세서** 매개 변수 값을 기준으로 주문을 여러 배치로 나눕니다. 이 매개 변수의 기본값은 **2000** 입니다. 예를 들어 단일 실행에서 주문 라인 10,000개가 최적화되고 **DOM 처리자** 매개 변수가 기본값인 **2000** 으로 설정된다면, DOM에서는 동시에 처리되는 배치 5개를 만듭니다. 그런 다음 옵티마이저에서 이행 계획을 가져와 라인에 적용합니다. 주문 라인을 두 위치로 분할해야 하는 경우 DOM은 가격과 세금이 라인 전체에 적절하게 분산되게 합니다.

![판매 주문 기준.](./media/ordercriteria.png "판매 주문 기준")

## <a name="results-of-dom-runs"></a>DOM 실행 결과

이행 프로필이 **자동 적용** 으로 설정되면, 실행 결과는 판매 주문 라인에 자동으로 적용되며 이행 계획은 별도로 확인할 수 있습니다. 그러나 이행 프로필이 **자동 적용** 으로 설정되지 않았다면 실행 결과는 이행 계획 보기에서만 확인할 수 있습니다. 

생성된 이행 계획을 모두 확인하려면 다음 단계를 따르세요.

1. **Retail 및 Commerce \> 분산 주문 관리 \> 분산 주문 관리** 로 이동합니다.
2. **분산 주문 관리** 작업 영역에서 **이행 계획** 타일을 선택합니다.
3. 이행 계획을 보려면 관련 주문 이행 계획의 ID를 선택합니다.

    이행 계획의 주문 세부 정보 섹션에는 실행의 일부였던 원래 판매 주문 라인이 표시됩니다. 주문 세부 정보 섹션에는 표준 판매 주문 라인 필드 외에 다음 세 가지 DOM 관련 필드도 포함됩니다.

    - **이행 유형** – 이 필드는 판매 주문 라인이 한 위치에 대해 완전히 중개되었는지, 부분적으로 중개되었는지, 전혀 중개되지 않았는지 여부를 표시합니다.
    - **분할** – 이 필드는 단일 판매 주문 라인이 분할되어 다른 위치로 중개되었는지를 표시합니다.
    - **이행 위치 수** – 이 필드는 (원래 판매 주문 라인이 중개된 위치 수를 기준으로) 단일 판매 주문 라인에 대해 생성된 이행 라인 수를 표시합니다.

    주문 이행 세부 정보 섹션에는 다양한 위치에 할당된 원래 판매 주문 라인과 관련 수량이 표시됩니다.

## <a name="order-line-actions-and-statuses"></a>주문 라인 조치 및 상태

다음은 주문 라인의 설정에 대한 설명입니다. 주문 라인을 열려면 **Retail 및 Commerce \> 고객 \> 모든 판매 주문** 으로 이동합니다.

- 판매 주문 라인의 **일반** 탭에 있는 **DOM 처리에서 제외** 옵션을 **예** 로 설정하면, 주문 또는 주문 라인이 DOM 처리에서 제외됩니다.
- 판매 주문 라인의 **일반** 탭에 있는 **DOM 상태** 필드는 다음 값 중 하나로 설정할 수 있습니다.

    - **없음** – 주문 라인이 중개되지 않았습니다.
    - **전체** – 주문 라인이 성공적으로 중개되어 위치에 할당되었습니다.
    - **예외** – 주문 라인이 중개되었지만 위치에 할당될 수 없습니다. 예외에는 DOM 작업 영역에서 볼 수 있는 여러 하위 유형이 있습니다.

        - **가용 수량 없음** – 위치에 주문을 할당할 수 있는 가용 재고가 없습니다.
        - **최대 거부** – 주문 라인이 거부 최대 임계값에 도달했습니다.
        - **데이터 수정 충돌** – 주문이 중개된 후 판매 주문 라인이 변경되었습니다. 따라서 이행 계획을 주문에 적용할 수 없습니다.
        - **주문 라인별 예외** – 주문 라인에 여러 예외가 있습니다.

- 판매 주문 입력 중에 DOM을 대화형 모드에서 실행할 수 있습니다. 주문 라인을 입력할 때 제품과 수량을 지정하고 나면, **라인 업데이트** 를 선택하고 **DOM** 에서 **이행 위치 제안** 을 선택할 수 있습니다. 이후에는 주문 라인의 수량을 이행할 수 있는 DOM 규칙을 기반으로 하는 위치 목록이 표시됩니다. 이 목록은 거리를 기준으로 정렬됩니다. 판매 주문 라인에서 관련 현장 및 창고를 설정할 위치를 선택합니다. 이 기능이 작동하려면 판매 라인의 판매 출처 및 배송 방식과 일치하는 기존 활성 이행 프로필이 있어야 합니다.
- 판매 주문 라인의 DOM 실행 로그를 확인하려면 **판매 주문 라인** 을 선택하고 **DOM** 에서 **DOM 로그 보기** 를 선택합니다. DOM 로그에는 DOM 실행에 의해 생성된 모든 이벤트와 로그가 표시됩니다. 로그를 사용하면 특정 위치가 주문 라인에 할당된 이유와, 할당의 일부로 고려된 규칙 및 제약 조건을 이해할 수 있습니다. **관리** 탭에서는 DOM 로그를 판매 주문 헤더 수준에서 확인할 수 있습니다.

## <a name="run-a-clean-up-job-for-dom-fulfillment-plans"></a>DOM 이행 계획에 대한 정리 작업 실행

DOM 처리가 실행되면 이행 계획이 생성됩니다. 시간이 지나면 시스템은 수많은 이행 계획을 유지하게 됩니다. 시스템에서 유지하는 이행 계획의 수를 관리하려면, **보존 기간(일)** 값을 기준으로 오래된 이행 계획을 삭제하는 일괄 처리 작업을 구성하면 됩니다.

1. **Retail 및 Commerce \> 분산 주문 관리 \> 일괄 처리 \> DOM 이행 데이터 삭제 작업 설정** 으로 이동합니다. 
1. **일괄 처리 그룹** 필드에서, 구성된 일괄 처리 그룹을 선택합니다.
1. **되풀이** 를 선택하고 일괄 처리 작업의 되풀이를 정의합니다.
1. **확인** 을 선택합니다.

## <a name="more-information"></a>추가 정보

다음은 DOM 기능을 사용할 때 고려해야 하는 항목입니다.

- 현재 DOM은 Commerce 채널에서 생성된 주문만 확인합니다. **Commerce 판매** 옵션이 **예** 로 설정된 경우 판매 주문은 판매 주문 집합으로 식별됩니다.
- Microsoft에서는 고급 창고 관리 기능을 이용해 DOM을 테스트하지 않았습니다. 따라서 고객과 파트너는 본인과 관련된 고급 창고 관리 기능 및 프로세스와 DOM이 호환되는지를 신중하게 확인해야 합니다. 고급 창고는 가용 재고를 정확하게 이해할 수는 없는 구성 가능한 차원(예: 재고 상태)을 활성화합니다. DOM은 고급 입고를 사용하는 구현을 위해 가용 인벤토리를 설정하는 확장 가능한 방법을 제공합니다. 이 방법을 사용하면 재고 상태 및 기타 차원의 사용자 정의 값을 처리할 수 있습니다.

    최적화 및 제약 조건을 고려하는 미리 빌드된 MIP 모델에서 최적화가 발생하기 때문에 DOM의 확장성은 제한됩니다. 재고 설정 및 사후 처리 최적화를 위해, 다양한 확장 가능한 지점이 이미 제공됩니다. DOM 프로필은 판매 출처 및 배송 방식에 따라 다를 수 있습니다. 판매 주문 출처는 주문 수집 중에 설정할 수 있으며, 이러한 값을 기반으로 다양한 최적화 전략을 사용할 수 있습니다. 또한 DOM은 DOM 처리자 작업을 입력으로 사용하고 프로필을 매개변수로 전달할 수 있게 하는 사용자 지정 일괄 처리 작업 생성을 지원합니다. 따라서 최적화를 하나씩 실행하여 다양한 비즈니스 시나리오를 지원할 수 있습니다.

- DOM은 Commerce 클라우드 버전에서만 사용할 수 있습니다. 온-프레미스 배포에서는 지원되지 않습니다.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
