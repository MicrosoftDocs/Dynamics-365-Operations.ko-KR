---
title: 명세서 계산을 위한 매장 거래 확인
description: 이 항목에서는 Microsoft Dynamics 365 Commerce에서 매장 거래를 확인하는 기능에 대해 설명합니다.
author: analpert
ms.date: 01/31/2022
ms.topic: index-page
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgriffin
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: analpert
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: f51b1f39aa212fe8587761721194db7791bec5bc
ms.sourcegitcommit: 7893ffb081c36838f110fadf29a183f9bdb72dd3
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/02/2022
ms.locfileid: "8452956"
---
# <a name="validate-store-transactions-for-statement-calculation"></a>명세서 계산을 위한 매장 거래 확인

[!include [banner](includes/banner.md)]

이 항목에서는 Microsoft Dynamics 365 Commerce에서 매장 거래를 확인하는 기능에 대해 설명합니다. 유효성 검사 프로세스는 명세서 게시 프로세스를 통해 선별되기 전에 게시 오류를 발생시키는 거래를 식별하고 표시합니다.

명세서를 게시하려 하면 상거래 테이블의 데이터가 일치하지 않아 유효성 검사 프로세스가 실패할 수 있습니다. 다음은 이러한 불일치를 유발할 수 있는 몇 가지 요인의 예입니다.

- 헤더 테이블의 거래 총액이 라인의 거래 총액과 일치하지 않습니다.
- 헤더 테이블에서 지정된 항목 수가 거래 테이블의 항목 수와 일치하지 않습니다.
- 헤더 테이블의 세금이 라인의 세액과 일치하지 않습니다. 

명세서 게시 프로세스에서 일치하지 않는 거래가 선별된 경우 생성된 판매 송장 및 지불 분개장으로 인해 명세서 게시가 실패할 수 있습니다. **매장 거래 확인** 프로세스는 거래 유효성 검사 규칙을 통과한 거래만 거래 명세서 계산 프로세스에 전달되도록 하여 이러한 문제를 방지합니다.

다음 그림은 거래 업로드, 거래 유효성 검사, 거래 명세서 계산 및 게시를 위한 정기 주간 프로세스와 재무제표 계산 및 게시를 위한 최종 프로세스를 보여 줍니다.

![거래 업로드, 거래 유효성 검사, 거래 명세서 계산 및 게시를 위한 정기 주간 프로세스와 재무제표 계산 및 게시를 위한 최종 프로세스를 보여 주는 그림](./media/valid-checker-statement-posting-flow.png)

## <a name="store-transaction-validation-rules"></a>매장 거래 유효성 검사 규칙

**매장 거래 확인** 배치 프로세스는 다음 유효성 검사 규칙에 따라 상거래 테이블의 일관성을 확인합니다.

> [!NOTE]
> 유효성 검사 규칙은 후속 릴리스에서 계속 추가될 예정입니다.

### <a name="transaction-header-validation-rules"></a>거래 헤더 유효성 검사 규칙

다음 표는 거래가 명세서 게시에 전달되기 전에 소매 거래의 헤더와 비교해 점검되는 거래 헤더 유효성 검사 규칙을 나열합니다.

| 규칙 | 설명 |
|-------|-------------|
| 영업일 | 이 규칙은 거래의 영업일이 원장의 개설 회계 기간과 연결되는지 확인합니다. |
| 통화 반올림 | 이 규칙은 거래 금액이 통화 반올림 규칙에 따라 반올림되는지 확인합니다. |
| 고객 계정 | 이 규칙은 거래에 사용된 고객이 데이터베이스에 존재하는지 확인합니다. |
| 할인 금액 | 이 규칙은 헤더의 할인 금액이 라인의 할인 금액의 합과 같은지 확인합니다. |
| 회계 문서 게시 상태(브라질) | 이 규칙은 회계 문서가 성공적으로 게시될 수 있는지 확인합니다. |
| 총액 | 이 규칙은 거래 헤더의 총액이 세금을 포함한 거래 라인에 비용을 더한 순액과 일치하는지 확인합니다. |
| 순액 | 이 규칙은 거래 헤더의 순액이 세금을 제외한 거래 라인에 요금을 더한 순액과 일치하는지 확인합니다. |
| 순액 + 세금 | 이 규칙은 거래 헤더의 총액이 세금을 제외한 거래 라인에 모든 세금과 요금을 더한 순액과 일치하는지 확인합니다. |
| 항목 수 | 이 규칙은 거래 헤더에서 지정된 항목 수가 거래 라인의 수량 합과 일치하는지 확인합니다. |
| 지불 금액 | 이 규칙은 거래 헤더의 지불 금액이 모든 지불 거래의 합과 일치하는지 확인합니다. |
| 면세 계산 | 이 규칙은 계산된 금액과 요금 라인의 면세된 세액의 합이 원래 계산된 금액과 같은지 확인합니다. |
| 세금 포함 가격 책정 | 이 규칙은 **세금 포함 가격** 플래그가 거래 헤더와 세금 거래 전반에서 일치하는지 확인합니다. |
| 거래가 비어 있지 않음 | 이 규칙은 거래에 라인이 포함되어 있고 최소한 하나의 라인이 무효화되지 않았는지 확인합니다. |
| 미달/과다 지불 | 이 규칙은 총액과 지불 금액 간의 차이가 최대 미달 지불/과다 지불 구성보다 크지 않은지 확인합니다. |

### <a name="transaction-line-validation-rules"></a>거래 라인 유효성 검사 규칙

다음 표는 거래가 명세서 게시에 전달되기 전에 소매 거래의 라인 세부 정보와 비교해 점검되는 거래 라인 유효성 검사 규칙을 나열합니다.

| 규칙 | 설명 |
|-------|-------------|
| 바코드 | 이 규칙은 거래 라인에 사용된 모든 항목 바코드가 데이터베이스에 존재하는지 확인합니다. |
| 요금 라인 | 이 규칙은 계산된 금액과 요금 라인의 면세된 세액의 합이 원래 계산된 금액과 같은지 확인합니다. |
| 기프트 카드 반환 | 이 규칙은 거래에 기프트 카드 반환 내역이 없는지 확인합니다. |
| 항목 변형 | 이 규칙은 거래 라인에 사용된 모든 항목 및 모든 변형이 데이터베이스에 존재하는지 확인합니다. |
| 라인 할인 | 이 규칙은 라인 할인 금액이 할인 거래의 합과 같은지 확인합니다. |
| 라인 세금 | 이 규칙은 라인 세액이 세금 거래의 합과 같은지 확인합니다. |
| 마이너스 가격 | 이 규칙은 거래 라인에 마이너스 가격이 사용되지 않았는지 확인합니다. |
| 일련 번호로 제어됨 | 이 규칙은 일련 번호로 제어되는 항목의 거래 라인에 일련 번호가 있는지 검증합니다. |
| 일련 번호 차원 | 이 규칙은 항목의 일련 번호 차원이 비활성화된 경우 일련 번호가 제공되지 않는지 확인합니다. |
| 기호 모순 | 이 규칙은 수량의 기호와 순액의 기호가 모든 거래 라인에서 동일한지 확인합니다. |
| 면세 | 이 규칙은 품목 가격과 요금 라인의 면세된 세액의 합이 원래 가격과 같은지 확인합니다. |
| 세금 그룹 할당 | 이 규칙은 판매세 그룹과 항목 세금 그룹의 조합이 올바른 세금 교차를 생성하는지 확인합니다. |
| 측정 단위 변환 | 이 규칙은 모든 라인의 측정 단위에 재고 측정 단위로 올바른 변환이 있는지 확인합니다. |

## <a name="enable-the-store-transaction-validation-process"></a>매장 거래 유효성 검사 프로세스 사용

Commerce Headquarters에서 정기 실행에 맞게 **매장 거래 확인** 작업을 구성합니다(**Retail 및 Commerce \> Retail 및 Commerce IT \> POS 게시**). 일괄 처리 작업은 매장의 조직 계층 구조를 토대로 예약됩니다. **P-Job** 및 **거래 명세서 계산** 일괄 처리 작업과 동일한 빈도로 실행되도록 이 배치 프로세스를 구성하는 것이 좋습니다.

## <a name="results-of-the-validation-process"></a>유효성 확인 프로세스의 결과

**매장 거래 확인** 배치 프로세스의 결과는 각 소매점 거래에서 볼 수 있습니다. 거래 레코드의 **유효성 검사 상태** 필드가 **성공**, **오류** 또는 **없음** 으로 설정됩니다. **마지막 유효성 검사 시간** 필드는 마지막 유효성 검사 실행 날짜를 보여 줍니다.

다음 표는 각 유효성 검사 상태를 설명합니다.

| 유효성 검사 상태 | 설명 |
|-------------------|-------------|
| 성공 | 설정된 모든 유효성 검사 규칙이 통과되었습니다. |
| 오류 | 설정된 유효성 검사 규칙에서 오류가 확인되었습니다. 작업 창에서 **유효성 검사 오류** 를 선택하여 오류에 대한 자세한 내용을 볼 수 있습니다. |
| 없음 | 유효성 검사 규칙을 적용할 필요가 없는 거래 유형입니다. |

![유효성 검사 상태 필드와 유효성 검사 오류 단추를 보여 주는 매장 거래 페이지.](./media/valid-checker-validation-status-errors.png)

유효성 검사 상태가 **성공** 인 거래만 거래 명세서에 적용됩니다. 상태가 **오류** 인 거래를 보려면 **매장 재무** 작업 영역에서 **현금 거래 유효성 검사 실패** 타일을 검토합니다.

![매장 재무 작업 영역의 타일.](./media/valid-checker-cash-carry-validation-failures.png)

현금 거래 유효성 검사 실패를 수정하는 방법에 대한 자세한 내용은 [현금 거래 및 현금 관리 거래 편집 및 감사](edit-cash-trans.md)를 참조하세요.

## <a name="additional-resources"></a>추가 리소스

[현금 판매 거래 및 현금 관리 거래 편집 및 감사](edit-cash-trans.md)

[!INCLUDE[footer-include](../includes/footer-banner.md)]
