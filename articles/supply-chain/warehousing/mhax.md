---
title: 자재 취급 장비 인터페이스(MHAX)
description: 이 항목에서는 외부 MH(물리적 자재 취급) 시스템에 연결할 수 있도록 MHAX(자재 취급 장비 인터페이스)를 설정하는 방법에 대해 설명합니다.
author: Mirzaab
ms.date: 03/04/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WMHEParameters, WMHESubscription, WMHEQueueManagerWorkspace, WMHEInboundQueue, WMHEOutboundQueue
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-04
ms.dyn365.ops.version: 10.0.17
ms.openlocfilehash: 7e71ca2877effe671723be53e844e8401714038a
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/29/2021
ms.locfileid: "8447799"
---
# <a name="material-handling-equipment-interface-mhax"></a>자재 취급 장비 인터페이스(MHAX)

[!include [banner](../../includes/banner.md)]

MHAX(*자재 처리 장비 인터페이스*)를 사용하여 Microsoft Dynamics 365 Supply Chain Management의 고급 창고 관리(WMS)로 관리되는 창고에 외부 MH(물리적 재료 처리) 시스템을 연결할 수 있습니다. WMS와 MH 시스템 간의 인터페이스는 두 개의 대기열로 구성됩니다. 하나는 아웃바운드 이벤트(WMS에서 MH로)이고 다른 하나는 인바운드 이벤트(MH에서 WMS로)용입니다. WMS 시스템은 다양한 작업 생성 및 실행 과정에서 생성되는 작업 라인을 기반으로 아웃바운드 이벤트를 생성합니다. 그런 다음 MH 시스템은 새로운 이벤트에 대해 WMS 시스템을 정기적으로 폴링하고 응답을 처리합니다. MH 시스템은 작업 지시에 따라 이벤트 처리를 완료한 후 작업 라인 완료 및 짧은 피킹과 같은 인바운드 이벤트를 보냅니다.

다음 그림은 MHAX 통합을 사용할 때 다양한 요소와 프로세스가 발생하는 순서를 보여줍니다.

![MHAX 구성 요소 및 상호 작용.](media/mhax-components.png "MHAX 구성 요소 및 상호 작용")

다음은 이전 그림에 표시된 상호 작용에 대한 설명입니다.

1. 작업 생성 또는 작업 실행 중에 아웃바운드 이벤트가 아웃바운드 큐에 생성됩니다.
2. MH 장비는 MH 장비 서비스에 연결하고 관련된 새 이벤트를 폴링하고 해당 이벤트를 처리합니다.
3. MH 장비가 다시 보고할 준비가 되면 서비스에 다시 연결하고 인바운드 이벤트를 제출합니다. 이러한 이벤트는 대기열 프로세서에서 즉시 처리됩니다.
4. 인바운드 이벤트 데이터를 기반으로 큐 프로세서는 기존 작업을 실행하거나 수정하거나 새 작업을 생성할 수 있습니다.

## <a name="turn-on-the-mhax-feature"></a>MHAX 기능 켜기

MHAX 기능을 사용하려면 해당 기능과 구성 키를 모두 켜야 합니다.

1. **시스템 관리 \> 작업 영역 \> 기능 관리** 로 이동합니다.
2. **[기능 관리](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)** 작업 영역에서 *자재 취급 장비 인터페이스* 라는 기능을 켭니다.
3. [유지 관리 모드](../../fin-ops-core/dev-itpro/sysadmin/maintenance-mode.md)에 설명된 대로 시스템을 유지 관리 모드로 설정합니다.
4. **시스템 관리 \> 설정 \> 라이선스 구성** 으로 이동합니다.
5. **거래 \> 창고 및 운송 관리** 를 확장한 다음 **자재 취급 장비 인터페이스** 확인란을 선택합니다.
6. [유지 관리 모드](../../fin-ops-core/dev-itpro/sysadmin/maintenance-mode.md)에 설명된 대로 유지 관리 모드를 끕니다.

## <a name="set-mhax-parameters"></a>MHAX 매개 변수 설정

기능을 구성하려면 **자재 취급 장비 인터페이스** 매개 변수 페이지에서 몇 가지 일반 매개 변수를 설정해야 합니다.

1. **자재 취급 장비 인터페이스 \> 설정 \> 자재 취급 장비 인터페이스 매개 변수** 로 이동합니다.
2. **일반** 탭에서 다음 필드를 설정합니다.

    - **사용자 ID** – 작업자를 선택합니다. 이 작업자는 인바운드 큐를 통해 처리되는 모든 작업 작업(픽 및 풋)을 실행하는 데 사용됩니다.
    - **인바운드 메시지 ID 활성화** - 중복 인바운드 메시지 ID가 수신된 경우 이 옵션을 *예* 로 설정하면 메시지가 거부되고 메시지가 이미 존재한다는 오류 메시지가 표시됩니다. 이 옵션이 *아니요* 로 설정되면 중복 인바운드 메시지 ID가 허용됩니다.

3. **숫자 시퀀스** 탭에서 인바운드 큐 항목, 아웃바운드 큐 항목 및 작업 라인 쌍에 대한 고유 ID를 생성하는 데 사용해야 하는 시스템 전체 번호 시퀀스를 선택합니다.

## <a name="outbound-events"></a>아웃바운드 이벤트

작업 생성 또는 작업 실행 중 특정 시점에서 시스템은 MH 시스템으로 보낼 아웃바운드 이벤트를 생성해야 하는지 여부를 결정합니다. 창고 처리 중 특정 지점에 대해 구독이 구성된 경우 시스템은 구독 설정에 따라 이벤트를 생성합니다.

### <a name="structure-of-outbound-events"></a>아웃바운드 이벤트의 구조

각 아웃바운드 이벤트는 아웃바운드 큐 ID로 고유하게 식별됩니다. 아웃바운드 트랜잭션 유형에 따라 이벤트 유형이 결정됩니다. 이벤트를 생성한 창고 및 구독 ID도 이벤트에 기록됩니다.

MH 시스템으로 데이터를 전달하기 위해 아웃바운드 이벤트에는 데이터(**데이터01** ~ **데이터10**)가 포함됩니다. 이러한 데이터 필드에는 기존 데이터베이스 필드에 대한 일대일(1:1) 매핑이 있습니다. 특히 작업 라인 및 작업 헤더 테이블의 필드에서 추출됩니다. 필드는 자유롭게 선택할 수 있습니다. 구독을 생성할 때 설정합니다.

기존 데이터베이스 필드에 대한 1:1 매핑이 있는 10개의 데이터 필드 외에도 이벤트에는 *페이로드* 로 알려진 추가 데이터 필드가 포함될 수 있습니다. 이 필드의 내용은 *페이로드 생성기* 로 알려진 사용자 지정 X++ 코드에 의해 생성됩니다. 사용해야 하는 페이로드 생성기는 구독에서 설정됩니다.

MH 시스템이 각 아웃바운드 큐 ID를 한 번만 수신하도록 하기 위해 상태 필드를 사용하여 이벤트를 외부 시스템으로 보낼 준비가 되었는지 또는 이미 보냈는지 여부를 지정합니다.

### <a name="outbound-queue-subscriptions"></a>아웃바운드 큐 구독

이벤트가 생성되기 전에 MHAX 기능에 이벤트 생성 여부와 생성 방법을 알려주도록 구독을 설정해야 합니다. 생성된 이벤트는 구독 식별자로 태그가 지정됩니다. 따라서 여러 MH 시스템이 동일한 WMS 시스템에 연결할 수 있지만 이벤트는 별도로 유지할 수 있습니다. MHAX 서비스가 새 이벤트에 대해 폴링될 때 구독은 이벤트 검색에 사용할 수 있는 옵션 중 하나입니다.

구독을 만들려면 **자재 취급 장비 인터페이스 \> 설정 \> 구독** 으로 이동합니다. 각 구독에 대해 다음 매개 변수를 사용할 수 있습니다.

- **구독 ID** – 구독을 식별하는 고유한 이름입니다.
- **설명** – 구독에 대한 자유 텍스트 설명입니다.
- **창고** – 이벤트가 필터링되어야 하는 특정 창고입니다.
- **아웃바운드 트랜잭션 유형** – 구독에 포함되어야 하는 이벤트 유형입니다.
- **페이로드 생성기** – 아웃바운드 이벤트의 **페이로드** 필드에 추가 정보를 입력할 수 있는 선택적 코드 확장입니다.

쿼리는 각 구독과 연결될 수 있습니다. 이 쿼리는 작업 라인과 헤더를 필터링하여 구독을 사용하여 이벤트를 생성하는 작업을 추가로 제한합니다. 구독에 쿼리를 추가하려면 **구독** 페이지에서 관련 구독에 대한 **쿼리 실행** 확인란을 선택한 다음 작업 창에서 **쿼리 수정** 을 선택합니다. 표준 Supply Chain Management 쿼리 편집기가 나타납니다.

또한 구독에는 필요에 따라 작업 헤더 또는 작업 라인의 필드를 아웃바운드 이벤트의 10개 무료 데이터 필드 중 일부 또는 전체에 매핑하는 *구독 맵* 이 포함됩니다. MHAX 서비스에 정보를 반환하려면 일반적으로 작업 라인 레코드 ID 또는 *작업 라인 쌍 ID* 를 포함합니다. (작업 라인 쌍 ID는 시스템이 단일 반환 명령을 사용하여 선택 및 배치 라인을 처리할 수 있도록 하는 새로운 속성입니다.) 나머지 필드는 사용 사례에 따라 다릅니다. 이 항목의 뒷부분에서 몇 가지 예를 제공합니다.

구독 맵을 설정하려면 **구독** 페이지에서 관련 구독을 선택한 다음 작업 창에서 **구독 맵** 을 선택합니다. 표시되는 **구독 맵** 대화 상자에서 필요에 따라 사용 가능한 각 데이터 필드에 대해 테이블과 필드를 할당할 수 있습니다.

### <a name="outbound-event-types"></a>아웃바운드 이벤트 유형

이 섹션에서는 사용 가능한 다양한 이벤트 유형에 대해 설명합니다. (이벤트 유형은 *트랜잭션 유형* 이라고도 합니다.) WMS 시스템에서 각 이벤트 유형이 생성되는 시기에 대해서도 설명합니다.

#### <a name="work-creation-events"></a>작업 생성 이벤트

작업 생성 이벤트는 애플리케이션에서 작업을 생성한 후 생성됩니다. 이 동작은 대부분의 작업 생성 프로세스 유형, 특히 피킹 및 보충 작업 생성에 적용됩니다. 일반적으로 작업자가 작업을 실행할 준비가 되었음을 나타내는 *열기* 상태에서 작업을 생성하면 작업 생성 이벤트가 생성됩니다. 또한 기본 이동 작업(템플릿 작업에 의한 이동이 아님)에 대해서는 해당 작품이 공개 작품으로 생성되지 않더라도 작품 생성 이벤트가 발생합니다.

이 동작의 주목할만한 예외는 현재 지원되지 않는 주기 계산 작업입니다. MH 시스템의 재고 실사는 MHAX의 범위를 벗어나며 실사 결과는 재고 실사 분개장로 가져와야 합니다.

작업이 생성된 후 MHAX 서비스는 생성된 작업 라인을 처리하고 각 작업 헤더에 대해 생성된 모든 작업 라인에 작업 라인 쌍 ID를 할당합니다. 목표는 모든 피킹 작업 라인을 연속적으로 하나의 작업 라인 쌍 ID로 그룹화하는 것입니다. (그룹은 작업 템플릿의 픽/풋 쌍에 해당합니다.) 이러한 방식으로 단일 ID를 사용하여 관련된 모든 픽 및 풋 라인에 대한 작업 완료를 보고할 수 있습니다. 그룹화 프로세스는 첫 번째 라인에서 시작한 다음 연속적인 풋/픽 작업 라인 쌍을 만날 때까지 동일한 ID로 계속됩니다. 실행 중인 ID는 해당 쌍의 풋 라인에 할당됩니다. 그런 다음 쌍의 픽 라인에 사용되는 새 ID입니다. 이 프로세스는 작업 헤더에 속한 모든 라인을 처리할 때까지 계속됩니다.

작업 생성 이벤트의 특수 기능으로 **차단된 웨이브** 옵션이 작업 헤더에서 *예* 로 설정되면 생성된 이벤트는 MH 시스템으로 보내는 데 사용되는 일반적인 *준비* 상태 대신 *차단됨* 상태가 됩니다. 작업 헤더의 **차단된 웨이브** 플래그는 완료되지 않은 보충 작업으로 인해 작업 헤더가 아직 작업자를 실행할 준비가 되지 않았음을 나타냅니다. **차단된 웨이브** 플래그가 지워지면 이미 생성된 이벤트가 차단 해제되고 MH 시스템이 큐에서 검색할 수 있습니다.

#### <a name="work-initiation-events"></a>작업 시작 이벤트

작업 시작 이벤트는 작업 업데이트 중 작업 상태가 *열기* 에서 *진행 중* 으로 변경될 때 트리거됩니다.

#### <a name="work-completion-events"></a>작업 완료 이벤트

작업 완료 이벤트는 작업 업데이트 중 작업 상태가 *진행 중* 에서 *닫힘* 으로 변경될 때 트리거됩니다.

#### <a name="work-cancellation-events"></a>작업 취소 이벤트

작업 취소 이벤트는 작업 업데이트 중 작업 상태가 *취소됨* 이외의 상태에서 *취소됨* 으로 변경될 때 트리거됩니다. 또한 작업 헤더와 관련된 다른 모든 이벤트는 모든 구독에 대한 큐에서 삭제됩니다. 이러한 방식으로 외부 시스템은 필요하지 않은 이벤트를 처리하지 못합니다.

#### <a name="pickput-completion-events"></a>픽/풋 완료 이벤트

픽/풋 완료 이벤트는 작업 라인 업데이트 중 픽/풋 라인 상태가 *진행 중* 에서 *닫힘* 으로 변경될 때 트리거됩니다.

### <a name="monitor-the-outbound-queue"></a>아웃바운드 큐 모니터링

아웃바운드 큐를 검토하려면 **자재 취급 장비 인터페이스 \> 공통 \> 아웃바운드 큐** 로 이동합니다. **아웃바운드 큐** 페이지에는 모든 아웃바운드 큐 항목과 해당 상태가 나열됩니다. 세부 정보를 보려면 큐 항목을 선택합니다. 이러한 세부 정보에는 항목의 트랜잭션 유형, 사용한 구독 및 각 데이터 필드(**데이터01** ~ **데이터10**)의 값 및 페이로드가 포함됩니다.

### <a name="clean-up-the-outbound-queue"></a>아웃바운드 큐 정리

결국 아웃바운드 큐는 이미 전송된 큐 항목으로 가득 차기 시작합니다. 이러한 항목을 제거하려면 **자재 취급 장비 인터페이스 \> 정기 작업 \> 정리 \> 아웃바운드 큐 정리** 로 이동합니다.

## <a name="inbound-events"></a>인바운드 이벤트

이 섹션에서는 MH 시스템이 WMS 시스템에 다시 보고할 수 있는 다양한 유형의 인바운드 이벤트에 대해 설명합니다. 또한 MH 시스템에서 데이터를 제공해야 하며 각 인바운드 이벤트가 WMS 시스템에서 수행하는 작업을 설명합니다.

### <a name="structure-of-inbound-events"></a>인바운드 이벤트의 구조

인바운드 이벤트가 제출되면 외부 시스템은 최대 10개의 매개 변수(**데이터01** ~ **데이터10**)와 함께 인바운드 트랜잭션 유형을 제공해야 합니다. 선택적 유효성 검사를 통해 MHAX 서비스가 동일한 인바운드 이벤트를 두 번 이상 수신하지 않았는지 확인할 수 있습니다. 이 유효성 검사를 사용하려면 각 인바운드 이벤트에 고유한 메시지 ID가 있어야 합니다. 중복 메시지 ID가 수신되고 **자재 취급 장비 인터페이스 매개 변수** 페이지에서 **인바운드 메시지 ID 활성화** 옵션이 *예* 로 설정된 경우 메시지가 거부됩니다. 메시지가 이미 존재한다는 오류 메시지가 나타납니다.

들어오는 데이터 필드 외에도 시스템은 이벤트에 고유한 인바운드 큐 ID를 할당합니다.

### <a name="inbound-event-types"></a>인바운드 이벤트 유형

이 섹션에서는 지원되는 인바운드 이벤트 유형(트랜잭션 유형)과 이벤트를 처리하기 위해 제공해야 하는 데이터에 대해 설명합니다.

#### <a name="work-confirm-events"></a>작업 확인 이벤트

작업 확인 이벤트를 사용하려면 수신 데이터 필드에 다음 정보가 포함되어야 합니다.

- **데이터01** – 작업 라인 쌍 ID입니다.
- **데이터02** – 작업 라인 레코드 ID(`RecId` 값)입니다.

    > [!NOTE]
    > *어느 한* **데이터01** 필드 *또는* **데이터02** 필드가 있어야 합니다.

- **데이터03** – 선택할 번호판의 ID입니다.
- **데이터04** – 작업 헤더의 대상 번호판 ID입니다.

작업 라인 쌍 ID가 제공되면 작업 라인 쌍 ID로 표시되고 상태가 *열기* 또는 *진행 중* 인 모든 픽, 풋 또는 사용자 정의 작업 라인이 순차적으로 실행됩니다. 작업 라인 레코드 ID(`RecId` 값)가 제공되는 경우 작업 라인은 상태가 *열기* 또는 *진행 중* 인 픽, 풋 또는 사용자 정의 작업 라인이어야 합니다.

번호판 제어 위치에서 라인을 선택하려면 라인이 작업 라인 레코드 ID 또는 작업 라인 쌍 ID로 표시되는지 여부에 관계없이 **데이터03** 이 선택해야 하는 번호판을 지정해야 합니다. **데이터04** 필드는 선택에 대한 작업 헤더의 대상 번호판을 지정해야 합니다.

풋 라인은 추가 정보를 허용하지 않습니다. 현재 작업 라인의 위치와 작업 대상 번호판만을 기준으로 실행됩니다. 다른 위치에 풋을 완료해야 하는 경우 이 항목 뒷부분의 [이벤트 재정의](#override-events) 섹션에 설명된 대로 작업 라인의 위치를 변경합니다.

사용자 정의 작업 라인은 인바운드 이벤트에서 추가 정보를 요구하거나 지원하지 않습니다.

#### <a name="short-pick-events"></a>단기 선택 이벤트

단기 선택 이벤트를 사용하려면 수신 데이터 필드에 다음 정보가 포함되어야 합니다.

- **데이터02** – 작업 레코드 ID(`RecId` 값)입니다.
- **데이터03** – 선택할 번호판의 ID입니다.
- **데이터04** – 선택할 수량입니다.
- **데이터05** – 단기 선택 예외 코드입니다.
- **데이터06** – 작업 헤더의 대상 번호판 ID입니다.

> [!NOTE]
> **데이터01** 필드는 단기 선택 이벤트에 사용되지 않습니다.

이 이벤트는 작업 확인 이벤트와 유사하지만 픽 라인에만 적용됩니다.

#### <a name="override-events"></a><a id="override-events"></a>이벤트 재정의

재정의 이벤트를 사용하려면 수신 데이터 필드에 다음 정보가 포함되어야 합니다.

- **데이터01** – 작업 레코드 ID(`RecId` 값)입니다.
- **데이터02** – 새 위치 ID입니다.

작업 라인은 *열림* 또는 *진행 중* 중 하나의 상태여야 하며 새 위치가 있어야 합니다.

#### <a name="license-plate-receipt-events"></a>번호판 수령 이벤트

번호판 수령 이벤트를 사용하려면 수신 데이터 필드에 다음 정보가 포함되어야 합니다.

- **데이터01** – 수령할 인바운드 번호판의 ID입니다.

시스템은 **데이터01** 필드의 값으로 전달된 번호판을 기반으로 번호판 수신 작업을 수행합니다.

### <a name="monitor-the-inbound-queue"></a>인바운드 큐 모니터링

인바운드 큐를 검토하려면 **자재 취급 장비 인터페이스 \> 공통 \> 인바운드 큐** 로 이동합니다. **인바운드 큐** 페이지에는 모든 인바운드 큐 항목과 해당 상태가 나열됩니다. 세부 정보를 보려면 큐 항목을 선택합니다. 이러한 세부 정보에는 항목의 트랜잭션 유형, 메시지 ID 및 각 데이터 필드(**데이터01** ~ **데이터10**)의 값이 포함됩니다.

인바운드 이벤트가 처리되는 동안 오류 또는 다른 유형의 로그 항목이 발생한 경우 작업 창에서 **오류 로그** 를 선택하여 로그를 검사할 수 있습니다.

### <a name="inbound-event-processing"></a>인바운드 이벤트 처리

인바운드 이벤트는 먼저 데이터베이스에 기록된 다음 즉시(동기적으로) 실행됩니다. 처리 중 오류가 발생하면 이벤트는 여전히 큐에 기록되지만 상태는 *오류* 로 설정됩니다. MHAX 서비스는 MH 시스템에 오류 메시지를 반환하고 나중에 조사할 수 있도록 오류 로그를 인바운드 이벤트 레코드에 저장합니다.

상태가 *오류* 인 이벤트는 오류 조건이 수정되면 나중에 다시 처리할 수 있습니다. 재처리하려면 다음 단계 중 하나를 수행하세요.

- **자재 취급 장비 인터페이스 \> 공통 \> 인바운드 큐** 로 이동합니다. 관련 인바운드 큐를 선택한 다음 작업 창에서에서 **재처리** 를 선택합니다.
- **자재 취급 장비 인터페이스 \> 공통 \> 오류가 발생한 인바운드 큐 재처리** 로 이동합니다. 표준 배치 작업 대화 상자가 나타납니다. 여기에서 레코드 필터를 설정하고 배치 작업을 예약하거나 실행하여 큐를 재처리할 수 있습니다.

모든 작업(픽 및 풋)은 **자재 취급 장비 인터페이스 매개 변수** 페이지의 **사용자 ID** 필드에서 선택된 작업자를 사용하여 실행됩니다.

### <a name="clean-up-the-inbound-queue"></a>인바운드 큐 정리

결국 인바운드 큐는 이미 처리된 큐 항목으로 가득 차기 시작합니다. 이러한 항목을 제거하려면 **자재 취급 장비 인터페이스 \> 정기 작업 \> 정리 \> 인바운드 큐 정리** 로 이동합니다.

## <a name="get-a-quick-overview-by-using-the-queue-manager"></a>큐 관리자를 사용하여 빠른 개요 보기

인바운드 및 아웃바운드 큐와 관련된 모든 활동에 대한 간략한 개요를 보려면 **자재 처리 장비 인터페이스 \> 작업 영역 \> 큐 관리자** 로 이동합니다. **큐 관리자** 페이지는 큐를 모니터링하고 탐색하는 데 사용할 수 있는 일련의 탭과 타일을 제공합니다. 또한 이 항목에서 언급된 대부분의 다른 페이지에 대한 유용한 링크를 제공합니다.

## <a name="connect-to-the-mhax-service"></a>MHAX 서비스에 연결

MHAX는 맞춤형 서비스로 구현됩니다. 따라서 SOAP 및 REST 호출을 통해 액세스할 수 있습니다. SOAP 및 REST 끝점의 주소는 다음과 같습니다.

- **SOAP:** `https://base_environment_URL/soap/services/WMHEServices`
- **REST:** `https://base_environment_URL/api/services/WMHEServices/WMHEService`

## <a name="retrieve-messages-from-the-outbound-queue"></a>아웃바운드 큐에서 메시지 검색

아웃바운드 큐에서 메시지를 검색하려면 다음 방법 중 하나를 사용하세요.

- `readOutboundSubscriptionQueue`를 사용하여 구독 ID를 기반으로 이벤트를 검색합니다.
- `readOutboundWarehouseQueue`를 사용하여 여러 구독에서 이벤트 유형 및 창고 ID를 기반으로 이벤트를 검색합니다.
