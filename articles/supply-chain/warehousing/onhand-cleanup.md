---
title: 창고 관리 현재고 정리 작업
description: 이 항목에서는 관련되지만 필요하지 않은 레코드를 식별하고 삭제하여 시스템 성능을 개선하는 데 도움이 되는 현재고 항목 정리 작업에 대해 설명합니다.
author: perlynne
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: 10.0.12
ms.openlocfilehash: b2bdfb7fa0c9c4d9e1f630a41357dc405f0082bc
ms.sourcegitcommit: fcb8a3419e3597fe855cae9eb21333698518c2c7
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/09/2022
ms.locfileid: "8450043"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a>창고 관리 현재고 정리 작업

[!include [banner](../includes/banner.md)]

현재고를 계산하는 데 사용되는 쿼리의 성능은 관련된 테이블의 레코드 수에 영향을 받습니다. 성능 향상에 도움이 되는 한 가지 방법은 데이터베이스에서 고려해야 하는 레코드 수를 줄이는 것입니다.

이 항목에서는 InventSum 및 WHSInventReserve 테이블에서 불필요한 레코드를 삭제하는 현재고 항목 정리 작업에 대해 설명합니다. 이 테이블은 창고 관리 처리가 가능한 항목에 대한 현재고 정보를 저장합니다. (이러한 항목을 WHS 항목이라고 합니다.) 이러한 레코드를 삭제하면 현재고 계산의 성능이 크게 향상될 수 있습니다.

## <a name="what-the-cleanup-job-does"></a>정리 작업이 하는 일

현재고 항목 정리 작업은 모든 필드 값이 *0*(영)인 WHSInventReserve 및 InventSum 테이블의 모든 레코드를 삭제합니다. 이러한 레코드는 현재고 정보에 기여하지 않기 때문에 삭제할 수 있습니다. 작업은 **위치** 수준 아래에 있는 레코드만 삭제합니다.

음수 총실사가 허용되는 경우 정리 작업에서 모든 관련 항목을 삭제하지 못할 수 있습니다. 이 제한의 이유는 작업에서 번호판에 여러 일련 번호가 있고 해당 일련 번호 중 하나가 음수가 되는 특수한 시나리오를 허용해야 하기 때문입니다. 예를 들어, 번호판에 일련 번호 1이 +1개 있고 일련 번호 2가 -1개 있는 경우 시스템은 번호판 수준에서 0을 보유하게 됩니다. 이 특별한 시나리오의 경우 작업은 더 낮은 수준에서 먼저 삭제를 시도하는 너비 우선 삭제를 수행합니다.

## <a name="schedule-and-configure-the-cleanup-job"></a>정리 작업 예약 및 구성

현재고 항목 정리 작업은 **재고 관리 \> 정기 작업 \> 정리 \> 창고 관리 재고 항목 정리** 에서 사용할 수 있습니다. 표준 작업 설정을 사용하여 작업 실행 범위와 일정을 제어합니다. 또한 다음 설정이 제공됩니다.

- **이 며칠 동안 업데이트되지 않으면 삭제** – 수량이 0으로 떨어진 현재고 항목을 삭제하기 전에 작업이 기다려야 하는 최소 일수를 입력합니다. 이 설정을 사용하면 아직 사용 중인 현재고 항목을 삭제할 위험을 줄이는 데 도움이 됩니다. 정리가 가능한 한 빨리 발생하도록 하려면 *0*(영)을 입력하거나 필드를 비워 둡니다.
- **최대 실행 시간(시간)** – 정리 작업의 최대 실행 시간을 시간 단위로 입력합니다. 이 시간이 지나기 전에 작업이 완료되지 않으면 지금까지 완료한 작업을 저장한 다음 자동으로 닫힙니다. 이 기능은 특히 재고 사용량이 많은 구현과 관련이 있습니다. 이러한 경우 시스템 부하가 가능한 한 가벼운 시간에 실행되도록 작업을 예약해야 합니다. 배치 작업이 완료될 때까지 계속 실행되도록 하려면 *0*(영)을 입력하거나 필드를 비워 둡니다. 이 설정은 관련 기능이 [시스템에서 켜져 있는](#max-execution-time) 경우에만 사용할 수 있습니다.

정규 업무 시간 중에도 작업을 실행할 수 있지만 업무 시간 외에 실행하는 것이 좋습니다. 이렇게 하면 사용자가 정리 중인 레코드로 작업할 때 발생할 수 있는 충돌을 방지하는 데 도움이 됩니다.

다른 사용자가 해당 레코드를 사용하는 동안 작업에서 항목에 대한 레코드를 삭제하려고 하면 정리 작업이나 사용자에게 교착 상태 오류가 발생합니다.

작업이 실행될 때 커밋 크기는 100입니다. 즉, 100번의 삭제마다 한 번씩 커밋을 시도합니다. 그러나 일부 삭제는 집합 기반이므로 동일한 트랜잭션에서 100개 이상의 레코드를 삭제할 수 있는 시나리오가 있을 수 있습니다. 따라서 잠금 에스컬레이션이 여전히 가끔 발생할 수 있습니다.

## <a name="possible-user-impact"></a>사용자에게 미칠 수 있는 영향

현재고 항목 정리 작업이 지정된 수준(예: 번호판 수준)에 대한 모든 레코드를 삭제하는 경우 사용자가 영향을 받을 수 있습니다. 이 경우 관련 현재고 항목을 더 이상 사용할 수 없기 때문에 번호판에서 이전에 보유하고 있던 재고를 확인하는 기능이 예상대로 작동하지 않을 수 있습니다. 예를 들어 다음과 같은 상황에서 발생할 수 있습니다.

- **현재고 목록** 에서 사용자가 **수량 \<\> 0** 조건을 선택 해제하거나 **치수 표시** 설정에서 **마감된 트랜잭션** 조건을 선택할 때.
- 과거 기간에 대한 **재고 차원별 실제 재고** 보고서에서 사용자가 **날짜 기준** 매개 변수를 설정할 때.

그러나 정리 작업이 제공하는 성능 향상은 이러한 작은 기능 손실을 보상하여야 합니다.

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a>최대 실행 시간 설정을 사용할 수 있도록 설정

**최대 실행 시간** 설정은 *창고 관리 현재고 정리 작업의 최대 실행 시간* 기능이 켜져 있을 경우에만 사용할 수 있습니다. Supply Chain Management 버전 10.0.25부터 이 기능은 기본적으로 켜져 있습니다. 관리자는 [기능 관리](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) 작업 공간에서 *창고 관리 현재고 항목 정리 작업의 최대 실행 시간* 기능을 검색하여 이 기능을 켜거나 끌 수 있습니다.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]