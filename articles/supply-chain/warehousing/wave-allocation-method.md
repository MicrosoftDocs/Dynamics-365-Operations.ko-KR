---
title: 웨이브 할당
description: 이 토픽에서는 병렬 처리를 활성화하는 방법을 포함하여 웨이브 할당 단계를 설정하는 방법에 대해 설명합니다.
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: 10.0.18
ms.openlocfilehash: 527bd24d7f2e9a05f6e617c222005186520f9968
ms.sourcegitcommit: fcb8a3419e3597fe855cae9eb21333698518c2c7
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/09/2022
ms.locfileid: "8450037"
---
# <a name="wave-allocation"></a>웨이브 할당

[!include [banner](../includes/banner.md)]

웨이브 처리는 시간이 많이 소요될 수 있으며 처리 시간의 대부분은 할당 단계와 작업 생성 단계에서 소요됩니다.

이제 이러한 각 단계를 병렬로 실행할 수 있어 웨이브 처리의 성능을 개선하고 동일한 창고에서 더 큰 웨이브 처리량을 허용할 수 있습니다. 이 토픽에서는 웨이브 할당 방법을 병렬로 실행하도록 설정하는 방법에 대해 설명합니다. 작업 생성을 병렬로 실행하도록 설정하는 방법에 대한 자세한 내용은 [웨이브 중 작업 생성 예약](configure-wave-schedule-work-creation.md)을 참조하세요.

이전에는 창고에서 한 번에 하나의 웨이브만 할당할 수 있었습니다. 이 제약 조건은 제거되고 예약 계층에서 위치 위에 있는 항목과 차원만 잠그는 새 제약 조건으로 대체되었습니다. 위치 위의 치수에는 항상 제품 치수가 포함됩니다. 예를 들어, *색상* 을 사용하여 항목을 구성한 경우 *빨간색*, *파란색* 및 *노란색* 에 대한 변형을 각각 병렬로 처리할 수 있습니다.

즉, 위치 위의 동일한 차원을 가진 동일한 항목이 한 웨이브에 의해 할당되는 경우 다른 웨이브는 동일한 항목 및 차원에 대한 잠금을 획득하기 위해 기다려야 합니다. 잠금을 적시에 획득하지 못하면 오류가 발생하고 웨이브 처리가 실패합니다.

병렬 처리를 활용하려면 웨이브가 배치로 실행되어야 합니다.

## <a name="performance-improvements"></a>성능 향상

병렬 처리의 성능 이점은 두 가지 범주로 나뉩니다.

- **향상된 처리량** - 특히 웨이브 내 항목이 겹치지 않는 시나리오의 경우 병렬 처리가 구성되지 않은 경우에도 일반적으로 웨이브 처리량이 향상됩니다.
- **단일 웨이브 할당 개선** - 고객 데이터에 대한 테스트 결과 병렬 할당으로 전환한 후 성능이 거의 50% 향상되었습니다. 병렬 처리는 위치 위의 항목 및 차원별로 수행되므로 개선 사항은 웨이브에 포함된 서로 다른 항목의 수, 사용 가능한 인프라, 할당 기간 대 작업 생성 기간에 따라 달라집니다.

## <a name="configure-parallel-allocation"></a>병렬 할당 구성

### <a name="warehouse-management-parameters"></a>창고 관리 매개 변수

병렬 할당 처리를 사용하려면 **창고 관리 > 설정 > 창고 관리 매개 변수** 로 이동하여 **웨이브 처리** 탭을 열고 다음 설정을 지정합니다.

- **웨이브 처리 일괄 그룹** - 웨이브의 초기 처리에서 사용할 배치 그룹을 선택합니다. 다른 배치 그룹을 사용하여 후속 할당 처리를 수행할 수 있습니다.
- **일괄 처리 웨이브** - 병렬 처리를 사용하려면 이 항목을 *예* 로 설정합니다.
- **잠금 대기(ms)** - 할당 단계가 다른 할당 단계에 의해 잠긴 시스템 리소스를 기다리는 시간(밀리초)을 입력합니다. 이 시간을 초과하면 웨이브가 처리되지 않고 오류 메시지가 표시됩니다. 하나의 논리 유닛 할당이 완료될 때까지 최소한 몇 초는 허용하는 것이 좋습니다.

**창고 관리 매개 변수** 페이지의 이러한 및 기타 웨이브 처리 옵션에 대한 정보는 [웨이브 처리를 위한 창고 매개 변수](wave-warehouse-parameters.md)를 참조하세요.

## <a name="wave-process-methods"></a>웨이브 프로세스 방법

병렬 처리를 설정하려면:

1. **창고 관리 > 설정 > 웨이브 > 웨이브 프로세스 방법** 으로 이동합니다.
1. 그리드에서 `allocateWave` 방식을 선택합니다.
1. 작업 창에서 **작업 구성** 을 선택합니다.
1. **웨이브 포스트 방식 작업 구성** 페이지가 열립니다. 이 그리드는 `allocateWave` 방법을 구성한 각 창고를 나열합니다. 병렬 처리는 나열된 창고에만 사용됩니다. 작업 창 버튼을 사용하여 필요에 따라 그리드에서 창고를 추가하거나 제거합니다. 
1. 각 창고에 대해 다음 설정을 지정합니다.
    - **최대 배치 작업 수** - 선택한 창고 할당에 사용해야 하는 배치 작업 수를 지정합니다. 최적의 배치 작업 수는 사용 가능한 인프라와 서버에서 처리 중인 다른 배치 작업에 따라 다릅니다. 웨이브 처리 전용 4개 코어 환경에서 수행된 테스트는 8개 작업을 사용하여 좋은 결과를 가져온 것으로 나타났습니다.
    - **웨이브 처리 배치 그룹** - 창고별로 할당 처리를 확장할 수 있도록 다른 창고에 대해 특정 배치 그룹을 사용할 수 있습니다.

## <a name="enable-or-disable-parallelization-across-all-legal-entities"></a>모든 법인에서 병렬화 활성화 또는 비활성화

`allocateWave` 메서드는 모든 법인에서 병렬로 실행되도록 설정하는 것이 웨이브 처리 성능을 향상시키는 데 도움이 되므로 설정하는 것이 좋습니다. Supply Chain Management 버전 10.0.17부터 *웨이브 방식 할당을 위한 웨이브 병렬화* 기능은 모든 신규 및 업데이트된 설치에 대해 기본적으로 설정되어 있으며 다시 해제할 수 없습니다. 이 기능을 활성화하면 다음이 발생합니다.

- `allocateWave` 메서드가 업데이트되어 **웨이브 프로세스 메서드** 페이지를 사용하여 병렬 프로세스 수와 동일한 동시에 실행할 작업 수를 정의할 수 있는 작업 구성 설정이 포함됩니다. 결과적으로 웨이브 할당 단계(일반적으로 총 처리 시간의 30%~60%)에 사용되는 시간이 작업 수와 거의 동일한 요소로 줄어듭니다. 이러한 작업을 처리하기 위해 할당할 배치를 선택할 수도 있습니다. 모든 법인이 웨이브를 일괄 처리하도록 구성된다는 점에 유의하는 것이 중요합니다. 이미 웨이브를 일괄 처리하도록 구성된 창고와 `allocateWave` 방식을 병렬로 사용하도록 구성된 창고의 경우 기존 구성이 유지됩니다.
- 기본적으로 모든 새 법인은 웨이브를 배치 처리하도록 구성됩니다. **창고 관리 프로세스** 옵션이 활성화된 모든 새 창고에는 기본적으로 병렬로 실행되도록 구성된 `allocateWave` 방법이 있습니다.
- **창고 관리 매개 변수** 페이지에서 **일괄 저장 처리** 는 *예* 로 설정되고 **잠금 대기(ms)** 는 기본 15초로 설정됩니다. 이는 모든 웨이브가 배치로 실행됨을 의미합니다. 웨이브가 실행 중일 때 할당 단계에서 위치 위의 항목 및 차원에 대한 잠금을 획득합니다. 다른 웨이브 처리 작업이 동일한 레코드에 대해 동일한 잠금을 획득하려고 하면 현재 프로세스가 완료될 때까지 차단됩니다. **잠금 대기(ms)** 설정은 잠금이 해제되기 전에 시스템이 대기할 최대 시간을 설정합니다.

병렬 할당 처리에서는 일괄 처리를 실행하기 위해 웨이브 처리가 필요합니다. 따라서, 특히 웨이브 처리가 관련 웨이브 방법에 대한 작업 구성에 정의된 병렬 프로세스를 사용하는 경우 **일괄 처리로 저장** 설정을 끄면 웨이브 처리 성능이 저하됩니다.

필요한 경우 인스턴스에 대해 *웨이브 할당 방법에 대한 웨이브 병렬화* 기능이 자동으로 활성화된 경우 기본적으로 지정된 각 설정을 실행 취소할 수 있습니다. 방법:

- **Warehouse Management \> 설정 \> Warehouse Management 매개 변수** 로 이동합니다. **웨이브 처리** 탭에서 **일괄 처리 웨이브** 및 **잠금 대기(ms)** 에 대해 원하는 값을 적용합니다.
- **창고 관리 \> 설정 \> 웨이브 \> 웨이브 처리 방법** 으로 이동합니다. `allocateWave` 방법을 선택합니다. 작업 창에서 **작업 구성** 을 선택하여 메서드가 병렬로 실행되도록 설정된 각 창고를 나열하는 페이지를 엽니다. 필요에 따라 나열된 각 창고에 대해 배치 작업 수와 할당된 웨이브 그룹을 수정하거나 삭제합니다.

## <a name="troubleshooting"></a>문제 해결

### <a name="troubleshoot-using-the-infolog"></a>Infolog를 사용하여 문제 해결

배치 프레임워크가 사용되기 때문에 웨이브 처리 중에 발생하는 오류는 배치 작업 Infologs의 일부로 캡처됩니다. 웨이브와 관련된 일괄 작업을 읽으려면:

1. **창고 관리 \> 아웃바운드 웨이브 \> 배송 웨이브 \> 모든 웨이브** 로 이동합니다.
1. 검사할 웨이브를 선택합니다.
1. 작업 창에서 **웨이브** 탭을 열고 **웨이브** 그룹에서 **배치 작업** 을 선택합니다.

웨이브 처리는 자체 수정되므로 처리 중에 감지된 오류는 Infolog를 사용하여 보고해야 합니다.

병렬 처리와 관련된 일반적인 오류는 두 개의 웨이브가 동시에 동일한 항목을 할당하려고 시도하고 하나가 완료되지 않아 다른 웨이브가 지정된 시간 내에 잠금을 획득할 수 없는 것일 수 있습니다. 이러한 상황이 발생하면 일괄 작업 로그에 항목에 대한 잠금을 획득할 수 없다는 정보가 포함되며, 이 경우 실패한 웨이브를 다시 처리해야 합니다.

처리가 병렬로 진행되기 때문에 처리 상태를 추적하려면 데이터를 서로 다른 테이블에 유지해야 합니다. 이는 일괄 작업에 대한 로그에 중복 키 오류와 같은 오류가 포함될 수 있음을 의미합니다.

일괄 작업의 오류도 일괄 작업 로그의 일부입니다. 가장 중요한 정보는 일반적으로 맨 아래에 있습니다.

드문 경우지만, 예를 들어 SQL 연결이 종료된 경우 일괄 처리 작업이 실행 중인 것처럼 보이지만 처리가 중지되는 일관성 없는 상태로 웨이브 처리가 종료될 수 있습니다. 웨이브는 이와 같은 오류를 처리할 수 없으므로 실패한 웨이브를 정리하려는 시도는 다음 웨이브가 실행될 때 수행됩니다. 또는 현재 웨이브가 일관성 없는 상태에 있는 경우 다음 단계를 수행하세요.

1. **창고 관리 \> 아웃바운드 웨이브 \> 배송 웨이브 \> 모든 웨이브** 로 이동합니다.
1. 정리해야 할 웨이브를 선택합니다.
1. 작업 창에서 **웨이브** 탭을 열고 **웨이브** 그룹에서 **웨이브 데이터 정리** 를 선택합니다.

### <a name="troubleshoot-using-the-wave-progress-log"></a>웨이브 진행 로그를 사용하여 문제 해결

**창고 관리 매개 변수** 페이지에서 **웨이브 진행 로그 생성** 옵션이 활성화된 경우 항목 및 해당 차원에 대한 할당이 시작되고 끝날 때마다 로그 레코드가 생성됩니다. 예를 들어 초기 테스트 중이나 문제 해결을 위해 필요할 때만 이 로그를 활성화해야 합니다. 이 옵션이 활성화되면 다음 단계를 수행하여 로그를 볼 수 있습니다.

1. **창고 관리 \> 아웃바운드 웨이브 \> 배송 웨이브 \> 모든 웨이브** 로 이동합니다.
1. 검사할 웨이브를 선택합니다.
1. 작업 창에서 **웨이브** 탭을 열고 **웨이브** 그룹에서 **진행률** 을 선택합니다.
